# IAB Tech Lab 소개 <a name="techlab"></a>

IAB Technology Laboratory(IAB Tech Lab)은 비영리 연구개발 컨소시엄으로, 글로벌 산업 기술 표준과 솔루션을 제정하고 기업들이 이를 구현할 수 있도록 지원하는 역할을 한다. Tech Lab의 목표는 디지털 광고 및 마케팅 공급망에서 발생하는 마찰을 줄이는 동시에 산업의 안전한 성장에 기여하는 것이다. IAB Tech Lab은 기술 표준 개발을 주도하고, IAB 표준을 신속하고 비용 효율적으로 구현할 수 있도록 코드 라이브러리를 제작 및 유지한다. 또한 기업들이 자사의 기술 솔루션이 IAB 표준과 호환되는지 평가할 수 있는 테스트 플랫폼을 구축한다. 18년 동안 IAB 표준은 디지털 광고 공급망에서 상호 운용성과 수익성 있는 성장의 기반이 되어왔다. IAB Technology Lab에 대한 자세한 내용은 www.iabtechlab.com에서 확인할 수 있다.


### 2.6 버전 명세에 기여한 주요 인물들

Stanislav Belov, 소프트웨어 엔지니어, Google; Allen Dove, CTO, Magnite; Steven Katz, 선임 수석 아키텍트, Yahoo!; Curt Larson, 최고 제품 책임자(CPO), Sharethrough; Dr. Neal Richter, 과학 디렉터, Amazon Advertising; Jud Spencer, 수석 소프트웨어 엔지니어, The Trade Desk; Ian Trider, 부사장, RTB 플랫폼 운영, Basis Technologies; Rob Hazan, 제품 관리 수석 디렉터, Index Exchange; James Wilhite, 제품 부사장, Publica; Jean-Luc Wasmer, 파트너십 운영 부사장, Triton Digital; Sam Mansour, 수석 제품 관리자, Oracle; Scott Kay, 엔지니어링 매니저, Xandr; Emma Fenlon, 교환 품질 수석 매니저, Yahoo!; Liam Whiteside, 광고 기술 책임자, Global; Don Marti, 생태계 혁신 부사장, Raptive; Aron Schatz, 제품 관리 디렉터, Double Verify; Jake Jolly, 제품 관리자, Google; Amit Shetty, 제품 부사장, Pixalate; Tim Harvey, 창립자, Knitting Media; Jason Shao, CTO, Place Exchange; Chris Coupland, 플랫폼 운영 매니저, Basis Technologies; Simon Trasler, 수석 부사장, Magnite; Patrick McCann, 연구 수석 부사장, Raptive; David Dabbs, 플랫폼 아키텍처 디렉터, Epsilon;


### IAB Tech Lab 리드:

힐러리 슬래터리(Hillary Slattery), IAB Tech Lab 제품 부문 시니어 디렉터


### 라이선스 <a name="license"></a>

이 명세는 크리에이티브 커먼즈 저작자표시 3.0 라이선스로 제공된다. 이 라이선스의 사본을 보려면 creativecommons.org/licenses/by/3.0/ http://creativecommons.org/licenses/by/3.0/을 방문하거나, 미국 캘리포니아주 샌프란시스코, 세컨드 스트리트 171번지 300호, 크리에이티브 커먼즈로 문의한다.


### 면책 조항 <a name="disclaimer"></a>

본 문서에서 제공하는 표준, 명세, 측정 가이드라인, 그리고 기타 자료 또는 서비스(이하 "제품 및 서비스")는 "있는 그대로" 그리고 "이용 가능한 상태로" 제공된다. IAB 테크놀로지 랩(Tech Lab)은 이와 관련하여 어떠한 보증도 하지 않으며, 명시적, 묵시적, 법적 보증을 포함한 모든 종류의 보증을 명시적으로 부인한다. 이에는 상품성, 특정 목적에의 적합성, 가용성, 오류 없음 또는 중단 없는 운영에 대한 보증, 거래 관행, 이행 과정 또는 상관습에서 비롯된 보증 등이 포함되지만 이에 국한되지 않는다. 적용 가능한 법률에 따라 Tech Lab이 묵시적 보증을 부인할 수 없는 경우, 해당 보증의 범위와 기간은 해당 법률에서 허용하는 최소한으로 제한된다. 본 제품 및 서비스는 비즈니스 또는 법적 조언을 제공하지 않는다. Tech Lab은 본 제품 및 서비스가 귀하 및/또는 귀하의 제품 또는 서비스가 적용 가능한 법률, 규정 또는 자율 규제 프레임워크를 준수하도록 보장하지 않으며, 귀하는 데이터 보호 법률을 포함한 이러한 준수에 대해 전적으로 책임을 진다. 여기에는 캐나다의 개인정보 보호 및 전자문서법(PIPEDA), EU 데이터 보호 지침, EU e-프라이버시 지침, EU 일반 데이터 보호 규정(GDPR), 그리고 발효 시점의 EU e-프라이버시 규정 등이 포함되지만 이에 국한되지 않는다.


# 목차

- [IAB Tech Lab 소개](#techlab)
- [라이선스](#license)
- [면책 조항](#disclaimer)


## [시작하기](#started)

## [1. 소개](#intro)

- [1.1 - 미션 / 개요](#mission)

- [1.2 - OpenRTB의 역사](#history)

- [1.3 - 버전 역사](#versionhistory)

	- [OpenRTB 실시간 입찰 API](#realtimebidding)

	- [OpenRTB 디스플레이 차단 목록 분기](#displayblock)

- [1.4 - 리소스](#resources)

- [1.5 - 용어 설명](#terminology)


## [2. OpenRTB 기본](#rtbbasics)

- [2.1 - 전송 방식](#transport)

- [2.2 - 보안](#security)

- [2.3 - 데이터 형식](#dataformat)

- [2.4 - 데이터 인코딩](#dataencoding)

- [2.5 - OpenRTB 버전 HTTP 헤더](#httpheader)

- [2.6 - 버전 관리 동작](#versioningbehavior)

- [2.7 - 개인정보 보호](#privacy)

- [2.8 - Brand Safety Certified와의 관계](#relationshiptocertified)

- [2.9 - 커스터마이징 및 확장](#customization)


## [3. 입찰 요청 사양](#bidspecification)

- [3.1 - 객체 모델](#objectmodel)

- [3.2 - 객체 사양](#objectspecs)

	- [3.2.1 - 객체: BidRequest](#objectbidrequest)

	- [3.2.2 - 객체: Source](#objectsource)

	- [3.2.3 - 객체: Regs](#objectregs)

	- [3.2.4 - 객체: Imp](#objectimp)

	- [3.2.5 - 객체: Metric](#objectmetric)

	- [3.2.6 - 객체: Banner](#objectbanner)

	- [3.2.7 - 객체: Video](#objectvideo)

	- [3.2.8 - 객체: Audio](#objectaudio)

	- [3.2.9 - 객체: Native](#objectnative)

	- [3.2.10 - 객체: Format](#objectformat)

	- [3.2.11 - 객체: Pmp](#objectpmp)

	- [3.2.12 - 객체: Deal](#objectdeal)

	- [3.2.13 - 객체: Site](#objectsite)

	- [3.2.14 - 객체: App](#objectapp)

	- [3.2.15 - 객체: Publisher](#objectpublisher)

	- [3.2.16 - 객체: Content](#objectcontent)

	- [3.2.17 - 객체: Producer](#objectproducer)

	- [3.2.18 - 객체: Device](#objectdevice)

	- [3.2.19 - 객체: Geo](#objectgeo)

	- [3.2.20 - 객체: User](#objectuser)

	- [3.2.21 - 객체: Data](#objectdata)

	- [3.2.22 - 객체: Segment](#objectsegment)

	- [3.2.23 - 객체: Network](#objectnetwork)

	- [3.2.24 - 객체: Channel](#objectchannel)

	- [3.2.25 - 객체: SupplyChain](#objectsupplychain)

	- [3.2.26 - 객체: SupplyChainNode](#objectsupplychainnode)

	- [3.2.27 - 객체: EID](#objecteid)

	- [3.2.28 - 객체: UID](#objectuid)

	- [3.2.29 - 객체: UserAgent](#objectuseragent)

	- [3.2.30 - 객체: BrandVersion](#objectbrandversion)

	- [3.2.31 - 객체: Qty](#objectqty)

	- [3.2.32 - 객체: DOOH](#objectdooh)

	- [3.2.33 - 객체: Refresh](#objectrefresh)

	- [3.2.34 - 객체: RefSettings](#objectrefsettings)

	- [3.2.35 - 객체: DurFloors](#objectdurfloors)


## [4. 입찰 응답 명세](#bidresponsespec)

- [4.1 - 객체 모델](#4.2objectmodel)

- [4.2 - 객체 명세](#objectspecs)

	- [4.2.1 - 객체: BidResponse](#objectbidresponse)

	- [4.2.2 - 객체: SeatBid](#objectseatbid)

	- [4.2.3 - 객체: Bid](#objectbid)

- [4.3 - 광고 제공 옵션](#adservingoptions)

	- [4.3.1 - 낙찰 시 제공되는 마크업](#markupservedonwin)

	- [4.3.2 - 입찰 시 제공되는 마크업](#markupservedinbid)

	- [4.3.3 - 광고 제공 방식 비교](#comparisonofapproaches)

- [4.4 - 치환 매크로](#substitutionmacros)

	- [4.4.1 - 매크로 ${AUCTION_MIN_TO_WIN} 관련 참고 사항](#notesonmacro)


## [5. 열거형 목록 사양](#enumeratedlistsspec)

## [6. 입찰 요청/응답 예제](#bidrequestresponsesamples)

- [6.1 - GitHub 저장소](#githubrepo)

- [6.2 - 입찰 요청](#6.4bidrequests)

	- [6.2.1 - 예제 1 – 간단한 배너](#simplebanner)

	- [6.2.2 - 예제 2 – 확장형 크리에이티브](#expandablecreative)

	- [6.2.3 - 예제 3 – 모바일](#example3mobile)

	- [6.2.4 - 예제 4 – 비디오](#example4video)

	- [6.2.5 - 예제 5 – 직접 거래가 포함된 PMP](#pmpwdirectdeal)

	- [6.2.6 - 예제 6 – 네이티브 광고](#example6nativead)

- [6.3 - 입찰 응답](#6.3bidresponses)

	- [6.3.1 - 예제 1 – 낙찰 통지 시 제공된 광고](#ex1adservedwin)

	- [6.3.2 - 예제 2 – 인라인으로 반환된 VAST XML 문서](#vastxml)

	- [6.3.3 - 예제 3 – 낙찰 통지 시 제공된 직접 거래 광고](#directdealadonwin)

	- [6.3.4 - 예제 4 – 인라인으로 반환된 네이티브 마크업](#nativemarkupreturnedinline)


## [7. 구현 노트](implementation.md#implementationnotes)

- [7.1 - 입찰하지 않음을 알리는 시그널](implementation.md#nobidsignaling)

- [7.2 - 노출 만료](implementation.md#impressionexpiration)

- [7.3 - PMP 및 직접 거래](implementation.md#pmpanddirectdeals)

- [7.4 - 스킵 가능성](implementation.md#skippability)

- [7.5 - 규정 리소스](implementation.md#regsresources)

- [7.6 - 비디오 및 오디오를 위한 팟 입찰](implementation.md#podbidding)

- [7.7 - 네트워크 대 채널 예시 사례](implementation.md#networkandchannel)

- [7.8 - 청구 가능 이벤트 및 추적 광고 계산](implementation.md#counting)

- [7.9 - 디지털 아웃오브홈](implementation.md#dooh)

- [7.10 - 업데이트된 비디오 시그널](implementation.md#videosignals)

- [7.11 - 플로어 사용에 대한 가이드라인](implementation.md#floors)

- [7.12 - ID 매칭 방법 가이드라인](implementation.md#idmm)

- [7.13 - 장르 및 gtax 속성 사용](implementation.md#genre)

- [7.14 - 확장된 콘텐츠 식별자 사용](implementation.md#cids)


## [부록 A. 추가 정보](#appendixa)

## [부록 B. 스펙 변경 로그](#appendixb)

## [부록 C. 쿠키 기반 ID 동기화](#appendixc)

## 시작하기 <a name="started"></a>

이 문서는 RTB(Real-Time Bidding) 인터페이스에 대한 상세한 설명을 담고 있다. 모든 객체가 '필수'는 아니며, 각 객체는 여러 선택적 파라미터를 포함할 수 있다. 여기서 '필수' 속성은 해당 속성이 누락될 경우 프로토콜이 기술적으로 깨질 가능성이 있는 경우를 의미한다. 즉, 모든 필수 속성이 포함되어 있다면 두 구현체 간에 최소한의 거래가 가능하지만, 필수 속성이 누락되면 거래가 불가능하다는 뜻이다. 그러나 이는 필수 속성만 포함하는 것이 비즈니스적으로 충분하다는 의미는 아니다. 예를 들어, 필수 속성만 포함된 요청은 사이트인지 앱인지, 또는 어떤 사이트/앱인지와 같은 컨텍스트 정보를 제공하지 않는다. 기술적으로는 거래가 가능하지만, 실제로 시장 참여자들은 이런 요청에 만족하지 않을 가능성이 높다.

일부 선택적 속성은 '권장'으로 표시된다. 여기서 '권장'은 해당 속성을 포함하는 것이 일반적이며, 대부분의 구현체가 이를 기대할 가능성이 높다는 의미이다. 최소한의 거래를 위해 필수는 아니지만, 시장 규범상 이러한 속성을 포함하는 것이 일반적이다. 구현체는 이러한 속성이 포함되지 않으면 거래를 원치 않을 수 있다. '권장'으로 표시된 것은 이러한 시장 규범을 반영한 것이며, IAB Tech Lab이 특정 속성을 전파하라는 제안으로 해석해서는 안 된다. 구현체는 비즈니스 파트너와의 논의를 바탕으로 어떤 속성을 제공할지 결정해야 하며, 관련 법규와 일치하는 방식으로 진행해야 한다.

<table>
  <tr>
    <td><strong>예제 타입</strong></td>
	  <td><strong>속성</strong></td>
    <td><strong>타입</strong></td>
    <td><strong>설명</strong></td>
  </tr>
  <tr>
	  <td rowspan="2">필수 속성 예제.<br> 편의를 위해 테이블 상단에 그룹화</td>    
<td><code>id</code></td>
    <td>문자열;<br> 필수</td>
    <td>...</td>
  </tr>
  <tr>
    <td><code>imp</code></td>
    <td>객체 배열;<br> 필수</td>
    <td>...</td>
  </tr>
  <tr>
<td rowspan="2">권장 속성 예제.<br> 필수 속성 이후에 그룹화</td>    
<td><code>site</code></td>
    <td>객체;<br>권장</td>
    <td>...</td>
  </tr>
  <tr>
    <td><code>app</code></td>
    <td>객체;<br>권장</td>
    <td>...</td>
  </tr>
  <tr>
<td rowspan="4">기본값이 있거나 없는 선택적 속성 예제.<br> 속성은 명시적으로 필수 또는 권장으로 표시되지 않는 한 선택적임</td>
    <td><code>test</code></td>
    <td>정수;<br>기본값 0</td>
    <td>...</td>
     <tr>
    <td><code>at</code></td>
    <td>정수;<br>기본값 2</td>
    <td>...</td>
  </tr>
  <tr>
    <td><code>tmax</code></td>
    <td>정수;</td>
    <td>...</td>
  </tr>
  <tr>
    <td><code>wseat</code></td>
    <td>문자열 배열</td>
    <td>...</td>
  </tr>
</table>

*필수, 권장, 선택적 속성이 어떻게 표시되는지 예시.*

**중요:** **권장** 속성은 필수가 아니므로 모든 공급원에서 사용 가능하지 않을 수 있다. OpenRTB 거래에 참여하는 모든 당사자는 통합 체크리스트를 개발하여 공급 측이 입찰 요청에서 지원하는 속성과 수요 측이 광고 결정에 필요한 속성을 식별하는 것이 좋다.


# 1. 소개 <a name="intro"></a>

## 1.1 - 목표 및 개요 <a name="mission"></a>

OpenRTB의 목표는 광고 구매자와 퍼블리셔 인벤토리 판매자 간의 통신을 위한 개방형 산업 표준을 제공함으로써 실시간 입찰(RTB) 시장의 성장을 촉진하는 것이다. 이 표준은 실시간 입찰 프로토콜, 정보 분류 체계, 오프라인 설정 동기화 등을 포함한 여러 측면을 다룬다.

이 문서는 이전 OpenRTB 협업인 "차단 목록 프로젝트"와 "OpenRTB 모바일" 프로젝트에서 발전한 실시간 입찰 인터페이스 표준을 명시한다. 이 프로토콜 표준은 퍼블리셔 인벤토리 공급자(예: 교환, 퍼블리셔와 협력하는 네트워크, 판매 측 플랫폼)와 해당 인벤토리의 경쟁적 구매자(예: 입찰자, 수요 측 플랫폼, 광고주와 협력하는 네트워크) 간의 연결을 단순화하는 것을 목표로 한다.

OpenRTB의 전반적인 목표는 구매자와 판매자 간의 통신을 위한 *공통 언어*를 만드는 것이다. 각 사업체의 운영 방식을 규제하려는 의도가 아니다. 당사자 간의 통합을 더 쉽게 만들어, 생태계 내 각 사업체에서 더 깊은 수준의 혁신이 이루어질 수 있도록 하는 데 초점을 맞춘다.


## 1.2 - OpenRTB의 역사 <a name="history"></a>

OpenRTB는 2010년 11월, 세 개의 수요 측 플랫폼(DataXu, MediaMath, Turn)과 세 개의 공급 측 플랫폼(Admeld, PubMatic, The Rubicon Project) 간의 파일럿 프로젝트로 시작되었다. 첫 번째 목표는 블록 리스트 교환을 위한 표준 통신 방식을 정립하는 것이었다. OpenRTB 블록 리스트 명세서 1.0 버전은 2010년 12월에 공개되었다.

업계의 긍정적인 반응을 이끌어낸 후, Nexage는 OpenRTB 프로젝트에 실시간 입찰 요청/응답 프로토콜에 초점을 맞춘 API 명세서를 제안했다. 특히 모바일 광고를 지원하는 데 중점을 두었다. 구매 측을 대표하는 기업(DataXu, Fiksu, [X+1])과 공급 측을 대표하는 기업(Nexage, Pubmatic, Smaato, Jumptap) 간에 모바일 소위원회가 구성되었다. 이 프로젝트는 2011년 2월 OpenRTB Mobile 1.0 명세서를 탄생시켰다.

모바일 명세서가 공개된 후, 비디오 광고 교환 플랫폼(BrightRoll, Adap.tv)이 DataXu와 ContextWeb과 협력하여 비디오 지원을 포함한 비디오 소위원회가 구성되었다. 이번 목표는 디스플레이, 비디오, 모바일을 하나의 문서로 통합하는 것이었다. 이러한 노력은 2011년 6월 OpenRTB 2.0이라는 통합 표준으로 이어졌다.

업계 전반에 걸쳐 폭넓게 채택되면서 OpenRTB는 2012년 1월 IAB Tech Lab 표준으로 채택되었고, 이때 2.1 버전이 공개되었다.


## 1.3 - 버전 기록 <a name="versionhistory"></a>

**OpenRTB 실시간 입찰 API** <a name="realtimebidding"></a>

2.6 - CTV 트랜잭션을 위한 Ad Pods, 구조화된 User-Agent 객체, 기타 소규모 개선 사항 도입.

2.5 - 헤더 입찰, 청구 및 손실 알림, Flex Ads, Payment ID, 전술 ID, 노출 지표, 아웃스트림 비디오 지원 및 기타 여러 소규모 개선 사항.

2.4 - 오디오 광고 유닛 지원 및 v2.x 역사상 가장 많은 소규모에서 중간 규모의 개선 사항.

2.3 - 네이티브 광고 유닛 지원 및 여러 소규모 개선 사항.

2.2 - 프라이빗 마켓플레이스 직접 거래, 비디오, 모바일 및 규제 신호를 위한 새로운 개선 사항.

2.1 - IQG 준수를 위한 개정, 소규모 개선 사항 및 수정.

2.0 - 디스플레이, 모바일 및 비디오 표준을 통합 사양으로 결합.

1.0 - OpenRTB 모바일의 초기 릴리스.

**OpenRTB 디스플레이 차단 목록 브랜치** <a name="displayblock"></a>

1.2 - Publisher Preferences API(제안).

1.1 - 크리에이티브 속성 실시간 교환을 포함한 소규모 편집.

1.0 - OpenRTB 차단 목록 사양의 초기 릴리스.


## 1.4 - 리소스 <a name="resources"></a>

스펙 업데이트는 IAB Tech Lab의 [프로그래매틱 공급망 작업 그룹](https://iabtechlab.com/working-groups/programmatic-supply-chain-working-group/)을 통해 진행된다. 작업 그룹에 참여하고 Slack 토론에 참여하려면 techlab@iabtechlab.com으로 문의한다.


## 1.5 - 용어 설명 <a name="terminology"></a>

이 문서에서는 OpenRTB 인터페이스와 해당 스펙의 맥락에서 사용되는 용어를 다음과 같이 정의한다.

| 용어      | 정의 |
|-----------|------------|
| `RTB`     | 실시간 입찰. 소비자가 기다리는 동안 개별 광고 노출(impression)에 대해 입찰하는 방식. |
| `Exchange` | 광고 노출 단위로 입찰자 간 경매를 진행하는 서비스. |
| `Bidder`  | 실시간 경매에 참여해 광고 노출을 획득하기 위해 경쟁하는 주체. |
| `Seat`    | 광고 노출을 획득하려는 광고주 또는 에이전시와 같은 광고 주체. 입찰자를 통해 대행하며, 일반적으로 광고 예산을 소유한 고객. |
| `Publisher` | 하나 이상의 사이트를 운영하는 주체. |
| `Site`    | 웹 및 애플리케이션을 포함한 광고 지원 콘텐츠. 별도로 명시되지 않는 한 이 범위에 포함. |
| `Deal`    | 퍼블리셔와 시트 간에 특정 조건 하에 광고 노출을 구매하기 위해 미리 체결한 계약. |


## 2. OpenRTB 기본 <a name="rtbbasics"></a>

다음 그림은 교환 플랫폼과 입찰자 간의 OpenRTB 상호작용을 보여준다. 광고 요청은 퍼블리셔 사이트나 애플리케이션에서 시작된다. 각 인바운드 광고 요청에 대해 입찰 요청이 입찰자들에게 브로드캐스트되고, 응답은 현재 경매 규칙에 따라 평가되어 승자가 선택된다. 승자는 승리 알림을 통해 경매 결과를 받는다. 광고 마크업은 입찰 시 미리 포함될 수도 있고, 승리 알림에 대한 응답으로 제공될 수도 있다. 별도의 청구 알림도 제공되며, 이는 OpenRTB 사양 범위를 벗어나는 교환 플랫폼의 다양한 정책(예: 디바이스 전달 시 청구, 가시성 등)을 수용하기 위한 것이다. 승리 알림은 입찰자의 가격 알고리즘에 성공 사실을 알리는 반면, 청구 알림은 실제로 비용이 적용되어야 함을 나타낸다. 또한, 입찰 실패 알림도 제공되어 입찰자가 자신의 입찰이 승리하지 못한 이유를 알 수 있게 한다.

승리 알림, 청구 알림, 입찰 실패 알림의 URL과 광고 마크업 자체에는 교환 플랫폼이 입찰자에게 중요한 데이터(예: 클리어링 가격)를 전달할 수 있는 여러 표준 매크로가 포함될 수 있다.

![](https://github.com/InteractiveAdvertisingBureau/openrtb2.x/blob/864a56706b106eda94c03abefaa01dd43544864c/assets/Figure1%20OpenRTB.png)

*그림 2: 참조 모델 - 요청 시퀀스.*

이 사양은 입찰 요청 및 응답과 승리, 청구, 입찰 실패 알림의 실시간 상호작용에 초점을 맞춘다. 관련 사양은 다음과 같다:

- [AdCOM](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md): 광고 공통 객체 모델로, 여러 IAB Tech Lab 사양에서 사용될 공통 객체와 값을 정의하는 동반 사양이다. OpenRTB 2.6부터는 모든 열거형 목록이 AdCOM에서 관리되어 더 빠른 반복이 가능하다.
- [OpenRTB 광고 관리 API](https://github.com/InteractiveAdvertisingBureau/AdManagementAPI/blob/master/Ad%20Management%20API%20v1.md): 입찰자와 교환 플랫폼 간의 크리에이티브 리뷰를 용이하게 하는 동반 사양이다.

기타 상호작용(예: 차단 목록 동기화, 트래픽 제어 등)은 향후 OpenRTB 이니셔티브나 대체 프로젝트의 후보가 될 수 있다.


## 2.1 - 전송 <a name="transport"></a>

교환소와 입찰자 간의 기본 프로토콜은 HTTP다. 특히, HTTP POST는 HTTP GET보다 더 큰 페이로드를 수용하고 바이너리 표현을 사용하기 위해 입찰 요청에 필수적이다. 입찰 성공 알림은 교환소의 재량에 따라 POST 또는 GET 중 하나를 사용할 수 있다.

콘텐츠를 반환하는 호출(예: 입찰 응답, 마크업을 반환하는 입찰 성공 알림)은 HTTP 코드 200을 반환해야 한다. 유효한 요청에 대해 콘텐츠를 반환하지 않는 호출(예: 입찰하지 않음을 나타내는 빈 입찰 응답, 마크업을 반환하지 않는 입찰 성공 알림)은 HTTP 204를 반환해야 한다. 잘못된 호출(예: 잘못된 형식이거나 손상된 페이로드를 포함하는 입찰 요청)은 콘텐츠 없이 HTTP 400을 반환해야 한다.

**모범 사례**: 연결 성능을 향상시키는 가장 간단하고 효과적인 방법 중 하나는 HTTP 지속 연결(Keep-Alive)을 활성화하는 것이다. 이는 연결 관리 오버헤드와 인터페이스 양측의 CPU 사용량을 줄여 전반적인 성능에 큰 영향을 미친다.


## 2.2 - 보안 <a name="security"></a>

OpenRTB 구현에 HTTPS가 기술적으로 필수는 아니다. 하지만 HTTPS 사용이 점점 더 일반화되고 있다. 따라서 익스체인지와 입찰자는 HTTPS만 사용하는 것을 강력히 권장한다.


## 2.3 - 데이터 형식 <a name="dataformat"></a>

JSON(JavaScript Object Notation)은 입찰 요청 및 입찰 응답 데이터 페이로드에 권장되는 형식이다. JSON은 인간이 읽기 쉬우면서도 간결한 특성이 있어 선택되었다. 데이터 페이로드에 대한 자세한 내용은 3장과 4장에서 설명한다.

선택적으로, 교환 플랫폼은 압축된 JSON, ProtoBuf, Avro 등과 같은 바이너리 표현을 제공할 수도 있다. 이러한 형식은 전송 시간과 대역폭 측면에서 더 효율적일 수 있다. IAB Tech Lab은 이러한 형식에 대한 참조 구현을 제공할 수 있다. 참조 구현이 제공되는 경우, 이를 사용하여 교환 플랫폼 간의 차이를 줄이는 것이 좋다.

입찰 요청은 Content-Type HTTP 헤더를 사용하여 데이터 표현을 MIME 타입으로 지정한다. 표준 JSON 표현의 MIME 타입은 다음과 같이 "application/json"이다. 입찰 응답의 형식은 입찰 요청과 동일해야 한다.

```Content-Type: application/json```

대체 바이너리 표현을 사용하는 경우, 교환 플랫폼이나 SSP는 Content-Type을 적절히 지정해야 한다. 예를 들어, "Content-Type: avro/binary" 또는 "Content-Type: application/x-protobuf"와 같이 지정할 수 있다. Content-Type이 누락된 경우, 교환 플랫폼이 다른 기본값을 선택하지 않았다면 입찰자는 타입을 application/json으로 간주해야 한다.

관례적으로, 속성이 없는 것은 공식적인 의미를 가진다. 대부분의 경우, 별도로 지정되지 않았다면 해당 값이 알려지지 않았음을 나타낸다.

## 2.4 - 데이터 인코딩 <a name="dataencoding"></a>

교환 플랫폼과 입찰자 간에 전송되는 데이터를 압축하는 것은 매우 유익하다. 압축은 전송되는 데이터의 크기를 크게 줄여 교환 플랫폼과 입찰자 모두에게 네트워크 대역폭을 절약한다. 이러한 절약을 완전히 실현하려면, 교환 플랫폼이 보내는 입찰 요청과 입찰자가 반환하는 입찰 응답 모두에 대해 압축을 활성화해야 한다.

입찰 응답에 대한 압축은 표준 HTTP 1.1 메커니즘을 사용하여 활성화할 수 있다. 대부분의 웹 서버는 이미 응답 콘텐츠의 gzip 압축을 지원하므로 이는 이상적인 선택이다. 교환 플랫폼이 응답을 압축하기를 원한다면, 표준 HTTP 1.1 Accept-Encoding 헤더를 설정해야 한다. 사용된 인코딩 값은 "gzip"이어야 한다.

```accept-encoding: gzip```

이 헤더는 교환 플랫폼이 응답에 대해 gzip 인코딩을 수용할 수 있음을 입찰자에게 알리는 역할을 한다. 입찰자 서버가 이를 지원하고 올바르게 구성된 경우, 자동으로 gzip 인코딩된 콘텐츠로 응답한다. 이는 표준 HTTP 1.1 Content-Encoding 헤더를 사용하여 표시된다.

```content-encoding: gzip```

입찰 요청에 대한 압축을 활성화하려면, 교환 플랫폼과 입찰자 간에 이 기능이 지원되는지 먼저 합의해야 한다. 이는 커스텀 데이터 형식을 사용할 때와 유사하다. 교환 플랫폼은 입찰 요청을 보내기 전에 형식과 인코딩을 모두 알아야 한다. 입찰자가 이를 지원하는 경우, 교환 플랫폼은 HTTP 1.1 Content-Encoding 헤더를 설정하여 gzip 압축된 입찰 요청을 보낸다는 것을 나타내야 한다. 사용된 인코딩 값은 "gzip"이어야 한다.

```content-enconding: gzip```

이 헤더가 설정되지 않은 경우, 요청 콘텐츠가 인코딩되지 않았다고 간주한다. HTTP 1.1에서 Content-Encoding 헤더는 일반적으로 응답 콘텐츠에만 사용된다. 그러나 요청 콘텐츠에 이 헤더를 사용함으로써, 사용된 데이터 형식에 관계없이 요청이 압축되었음을 나타낼 수 있다. 이는 바이너리 데이터 형식도 압축의 이점을 얻을 수 있기 때문에 유용하다.


## 2.5 - OpenRTB 버전 HTTP 헤더 <a name="httpheader"></a>

OpenRTB 버전은 커스텀 헤더 파라미터를 사용해 입찰 요청의 헤더에 전달해야 한다. 이렇게 하면 입찰자가 요청을 파싱하기 전에 메시지의 버전을 인식할 수 있다.

또한, 선택 사항이지만 권장되는 사항으로, 입찰자는 응답의 HTTP 헤더에 구현한 프로토콜 버전을 동일한 형식으로 포함시키는 것이 좋다. 이 메시지는 요청 헤더와 다른 버전 번호를 포함할 수 있다.

*x-openrtb-version: 2.6*

이 버전은 `<주 버전>.<부 버전>` 형식(예: 2.6)으로 지정해야 한다.


## 2.6 - 버전 관리 동작 <a name="versioningbehavior"></a>

OpenRTB 2.6-202211 버전부터 OpenRTB의 버전 번호는 하위 호환성이 깨지는 변경 사항이 있을 때만 증가한다. 즉, OpenRTB 2.7은 OpenRTB 2.6과 구별되는 별도의 버전으로 간주해야 한다. 예를 들어, 수요 측(클라이언트)이 공급 측(서버)에서 받은 입찰 요청을 파싱할 때 버전 헤더를 고려할 수 있다. 자세한 내용은 OpenRTB 원칙을 참고한다.

현재 OpenRTB 스펙 버전은 새로운 필드, 객체, 열거형 리스트 값과 같이 하위 호환성을 유지하는 개선 사항이 있을 경우 매월 한 번씩 업데이트된다. 스펙 자체에 큰 영향을 미치지 않는 설명의 명확화나 수정과 같은 오류도 매월 업데이트에서 처리된다. 자세한 내용은 오류 수정을 참고한다.

각 월별 릴리즈마다 브랜치가 생성되며, GitHub에서 이력을 확인할 수 있다. 저장소의 master 브랜치는 항상 최신 릴리즈를 반영하며, 진행 중인 개발 작업은 'develop' 브랜치에서 이루어진다.

이 버전 관리 정책은 OpenRTB 2.x의 역사적 관행과는 다르다. OpenRTB 2.6 이전 버전에서는 주 버전 번호가 하위 호환성을 깨는 변경 사항을 나타내고, 부 버전 번호가 하위 호환성을 유지하는 변경 사항을 나타냈다. 이는 다음과 같은 의미를 가진다:

- 입찰자와 거래소는 새로운 필드나 예상치 못한 열거형 리스트 값을 수신하더라도 이를 알 수 없는 값으로 처리하거나 무시해야 한다.
- 입찰자와 거래소는 새로운 필드나 열거형 리스트 값을 자유롭게 전송할 수 있다.

예를 들어, OpenRTB 2.6의 향후 버전에서 새로운 필드나 객체가 추가되면, 거래소는 해당 필드를 지원하기로 결정한 경우 즉시 입찰자에게 전송하기 시작해야 한다. 입찰자는 자신에게 관련이 있는 경우 자유롭게 이를 사용하기 시작할 수 있다. 양측 모두 최신 릴리즈로의 "업그레이드"를 명시적으로 협상할 필요는 없지만, 사용 가능한 특정 필드에 대해 관심이 있다면 논의해야 한다.

OpenRTB 2.6의 새로운 부 버전은 추가적인 선택적 처리 방식을 도입할 수 있다. 예를 들어, `burl` 필드는 OpenRTB 2.5에서 도입되었다. `adm` 필드의 마크업에 픽셀을 포함하는 대신 `burl`을 사용하는 것은 특정 거래소와 입찰자 간 통합에 있어 하위 호환성을 깨는 변경이지만, 이는 양측 간 노출 수 계산 방법을 전환하기로 한 결정의 결과이며 OpenRTB 2.5 자체의 결과는 아니다. 파트너들은 통합에 하위 호환성을 깨는 변경을 하기 전에 이러한 상황에 대해 논의해야 한다.


## 2.7 - 개인정보 보호 <a name="privacy"></a>

면책 조항의 범위에 제한을 두지 않고, OpenRTB 사양은 소비자 개인정보 보호와 관련된 정보를 전달하기 위해 다음과 같은 기능을 포함한다. 이는 다음에 한정되지 않는다:

- Do Not Track 헤더 상태 (섹션 3.2.18)
- 사이트/앱 개인정보 보호 정책 존재 여부 (섹션 3.2.13 및 섹션 3.2.14)
- 입찰 요청 전송자가 적용 가능하다고 판단하는 규정 또는 법률 (섹션 3.2.3)
- 사용자에 대한 동의 및 옵트아웃 정보 문자열 (Global Privacy Platform, US Privacy String 및 Transparency and Consent Framework 동의 문자열) (섹션 3.2.3 및 섹션 3.2.20)

면책 조항에서 언급한 바와 같이, 각 구현자는 자신의 구현이 적용 가능한 법률, 규정 또는 자율 규제 프레임워크를 준수하는지 확인할 책임이 있다.


## 2.8 - Brand Safety Certified와의 관계 <a name="relationshiptocertified"></a>

OpenRTB는 [https://www.tagtoday.net/brand-safety](https://www.tagtoday.net/brand-safety)에서 제공하는 Brand Safety Certified와 완벽하게 호환된다.


## 2.9 - 커스터마이징과 확장 <a name="customization"></a>

OpenRTB 스펙은 각 광고 거래소(Exchange)에 맞는 커스터마이징과 스펙 확장을 허용한다. 모든 객체는 확장 필드를 포함할 수 있다. 플랫폼 간 일관성을 유지하기 위해 확장 필드는 항상 `ext`로 명명해야 한다.

일반적이고 잘 알려진 확장을 더 잘 지원하기 위해, IAB Tech Lab은 이제 이러한 확장을 GitHub 저장소에서 호스팅하고 있다: https://github.com/InteractiveAdvertisingBureau/openrtb/tree/master/extensions


# 3. 입찰 요청 사양 <a name="bidspecification"></a>

RTB 거래는 광고 교환소나 다른 공급원이 입찰자에게 입찰 요청을 보낼 때 시작된다. 입찰 요청은 최상위 입찰 요청 객체와 최소 하나의 광고 노출 객체로 구성되며, 선택적으로 광고 노출의 맥락을 제공하는 추가 객체를 포함할 수 있다.


## 3.1 - 오브젝트 모델 <a name="objectmodel"></a>

다음은 입찰 요청에 대한 오브젝트 모델이다. 최상위 오브젝트(즉, JSON에서 이름이 없는 외부 오브젝트)는 모델에서 `BidRequest`로 표시된다. 이 오브젝트의 직접적인 하위 오브젝트 중에서 `Imp`는 기술적으로 필수 항목이다. 이는 판매 중인 광고 노출을 설명하는 데 기본이 되며, `Banner`(여러 형식을 허용할 수 있음), `Video`, `Audio`, `Native` 중 최소 하나 이상을 포함해야 광고 노출 유형을 정의할 수 있다(즉, 게시자가 허용하는 하나 이상의 유형이지만, 입찰은 지정된 유형 중 정확히 하나에 대해 이루어짐). 광고 노출은 선택적으로 프라이빗 마켓플레이스의 대상이 될 수 있다.

![](https://github.com/InteractiveAdvertisingBureau/openrtb2.x/blob/a29f4b1060c04813270dbf13607bba0403409068/assets/ORTB%20ERD.png)

*그림 3: 입찰 요청 오브젝트 모델.*

`BidRequest`의 다른 하위 오브젝트들은 입찰자가 타겟팅과 가격 결정을 내리는 데 도움을 주기 위한 다양한 정보를 제공한다.

모델 그림에는 표시되지 않았지만, 확장 오브젝트가 있다. 이는 표준에 대해 교환별 확장을 전달하기 위해 다른 오브젝트에 추가할 수 있는 정의되지 않은 구조의 오브젝트이다. 이러한 오브젝트를 사용하는 교환은 자신의 확장 사항을 입찰자에게 공개할 책임이 있다.

다음 표는 입찰 요청 모델의 오브젝트들을 요약하며, 이후 하위 섹션에서 상세 정의를 찾을 수 있는 인덱스 역할을 한다.

| 오브젝트 | 섹션 | 설명 |
| --- | --- | --- |
| `BidRequest` | 3.2.1 | 최상위 오브젝트. |
| `Source` | 3.2.2 | 경매 후 결정(예: 헤더 입찰)에 대한 요청 소스 정보. |
| `Regs` | 3.2.3 | 이 입찰 요청의 모든 광고 노출에 적용되는 규제 조건. |
| `Imp` | 3.2.4 | 특정 광고 노출에 대한 설명을 담는 컨테이너; 요청당 최소 1개 필요. |
| `Metric` | 3.2.5 | 광고 노출에 대한 정량적이고 종종 과거 데이터 포인트. |
| `Banner` | 3.2.6 | 배너 광고 노출(인배너 비디오 포함) 또는 동반 비디오 광고에 대한 세부 정보. |
| `Video` | 3.2.7 | 비디오 광고 노출에 대한 세부 정보. |
| `Audio` | 3.2.8 | 오디오 광고 노출을 위한 컨테이너. |
| `Native` | 3.2.9 | Dynamic Native Ads API를 준수하는 네이티브 광고 노출을 위한 컨테이너. |
| `Format` | 3.2.10 | 배너의 허용 가능한 크기. |
| `Pmp` | 3.2.11 | 이 광고 노출에 적용 가능한 프라이빗 마켓플레이스(PMP) 딜 모음. |
| `Deal` | 3.2.12 | 판매자와 구매자 간의 이 광고 노출에 관한 딜 조건. |
| `Site` | 3.2.13 | 광고 노출을 요청하는 웹사이트에 대한 세부 정보. |
| `App` | 3.2.14 | 광고 노출을 요청하는 애플리케이션에 대한 세부 정보. |
| `Publisher` | 3.2.15 | 사이트 또는 앱의 콘텐츠를 제어하고 배포하는 주체. |
| `Content` | 3.2.16 | 광고가 표시될 게시된 콘텐츠 자체에 대한 세부 정보. |
| `Producer` | 3.2.17 | 콘텐츠 제작자; 반드시 게시자와 일치하지 않음(예: 신디케이션). |
| `Device` | 3.2.18 | 콘텐츠와 광고 노출이 표시되는 디바이스에 대한 세부 정보. |
| `Geo` | 3.2.19 | 부모 오브젝트에 따라 디바이스 또는 사용자의 위치 정보. |
| `User` | 3.2.20 | 디바이스를 사용하는 인간 사용자; 광고 대상. |
| `Data` | 3.2.21 | 특정 데이터 소스에서 제공된 추가 사용자 타겟팅 데이터 모음. |
| `Segment` | 3.2.22 | 특정 데이터 소스에서 제공된 사용자에 대한 특정 데이터 포인트. |
| `Network` | 3.2.23 | 광고가 표시될 네트워크. |
| `Channel` | 3.2.24 | 광고가 표시될 채널. |
| `SupplyChain` | 3.2.25 | 인벤토리에 대한 직접적인 지불 흐름에 관여하는 주체들을 처음부터 끝까지 나타내는 노드 체인. |
| `SupplyChainNode` | 3.2.26 | 입찰 요청의 공급 체인에 참여하는 주체의 정체성을 정의하는 노드. |
| `EIDs` | 3.2.27 | 확장 식별자 지원. |
| `UIDs` | 3.2.28 | 확장 식별자 사용자 ID 지원. |
| `UserAgent` | 3.2.29 | 구조화된 사용자 에이전트 정보. |
| `BrandVersion` | 3.2.30 | 브라우저 또는 유사 소프트웨어 컴포넌트의 이름 및 버전 정보. |
| `Qty` | 3.2.31 | 광고가 여러 사람에게 표시될 때 총 광고 노출 수를 나타내는 승수를 전달하는 수단. |
| `DOOH` | 3.2.32 | 디지털 아웃오브홈 인벤토리에 대한 광고 노출 요청 세부 정보. |


# 3.2 - 객체 명세 <a name="objectspecs"></a>

### 3.2.1 - 객체: BidRequest <a name="objectbidrequest"></a>

최상위 입찰 요청 객체는 교환에서 고유한 입찰 요청 또는 경매 ID를 포함한다. 이 `id` 속성은 필수이며, 최소 하나의 광고 노출(Impression) 객체(3.2.4절 참조)도 반드시 포함해야 한다. 이 최상위 객체의 다른 속성들은 제공되는 모든 광고 노출에 적용되는 규칙과 제약 조건을 정의한다.

또한 잠재적인 구매자에게 상세한 데이터를 제공하는 여러 하위 객체가 있다. 이 중 `Site`, `App`, `DOOH` 객체는 광고 노출이 나타나는 출판 미디어의 유형을 설명한다. 이러한 객체는 강력히 권장되지만, 주어진 입찰 요청에 따라 하나만 적용된다. 미디어가 브라우저 기반 웹 콘텐츠, 비브라우저 애플리케이션, 또는 디지털 아웃오브홈(Digital Out of Home) 인벤토리인지에 따라 해당 객체가 사용된다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string; 필수 | 교환에서 할당한 입찰 요청 ID로, 교환의 응답 추적에 사용된다. 교환은 수신자에 따라 다른 값을 사용할 수 있다. |
| `imp` | 객체 배열; 필수 | 제공되는 광고 노출을 나타내는 `Imp` 객체 배열(3.2.4절 참조). 최소 1개의 `Imp` 객체가 필요하다. |
| `site` | 객체; 권장 | 출판자의 웹사이트에 대한 세부 정보를 제공하는 `Site` 객체(3.2.13절 참조). 웹사이트에만 적용되며 권장된다. |
| `app` | 객체; 권장 | 출판자의 앱(비브라우저 애플리케이션)에 대한 세부 정보를 제공하는 `App` 객체(3.2.14절 참조). 앱에만 적용되며 권장된다. |
| `dooh` | 객체 | 광고 지원 콘텐츠가 디지털 아웃오브홈 화면인 경우 이 객체를 포함해야 한다. DOOH 객체가 포함된 입찰 요청은 `site` 또는 `app` 객체를 포함하지 않아야 한다. |
| `device` | 객체; 권장 | 광고 노출이 전달될 사용자 디바이스에 대한 세부 정보를 제공하는 `Device` 객체(3.2.18절 참조). |
| `user` | 객체; 권장 | 디바이스의 사용자(광고 대상자)에 대한 세부 정보를 제공하는 `User` 객체(3.2.20절 참조). |
| `test` | integer; 기본값 0 | 테스트 모드 여부를 나타내는 플래그. 0 = 실제 모드, 1 = 테스트 모드. 테스트 모드에서는 경매가 청구되지 않는다. |
| `at` | integer; 기본값 2 | 경매 유형. 1 = 1차 가격 경매, 2 = 2차 가격 경매. 교환별 경매 유형은 500 이상의 값으로 정의할 수 있다. |
| `tmax` | integer | 교환이 입찰을 받기 위해 허용하는 최대 시간(밀리초 단위). 인터넷 지연 시간을 포함하며, 타임아웃을 방지하기 위해 사용된다. 이 값은 교환의 사전 지침을 대체한다. |
| `wseat` | string 배열 | 이 광고 노출에 입찰할 수 있는 구매자 시트(예: 광고주, 대행사)의 허용 목록. 시트 ID와 구매자의 고객 정보는 입찰자와 교환 간에 사전 조율되어야 한다. `wseat`와 `bseat` 중 하나만 사용해야 한다. 둘 다 생략하면 시트 제한이 없다는 의미이다. |
| `bseat` | string 배열 | 이 광고 노출에 입찰할 수 없는 구매자 시트(예: 광고주, 대행사)의 차단 목록. 시트 ID와 구매자의 고객 정보는 입찰자와 교환 간에 사전 조율되어야 한다. `wseat`와 `bseat` 중 하나만 사용해야 한다. 둘 다 생략하면 시트 제한이 없다는 의미이다. |
| `allimps` | integer; 기본값 0 | 교환이 제공된 광고 노출이 컨텍스트에서 사용 가능한 모든 노출(예: 웹 페이지의 모든 노출, 프리/미드/포스트 롤 등 모든 비디오 스팟)을 대표하는지 확인할 수 있는지 여부를 나타내는 플래그. 0 = 아니오 또는 알 수 없음, 1 = 예, 제공된 노출이 사용 가능한 모든 노출을 대표한다. |
| `cur` | string 배열 | ISO-4217 알파 코드를 사용한 이 입찰 요청에 대한 허용 통화 목록. 교환에서 여러 통화를 허용하는 경우에만 권장된다. |
| `wlang` | string 배열 | ISO-639-1-alpha-2를 사용한 광고 소재의 허용 언어 목록. 생략 시 특정 제한이 없지만, 구매자는 `Device` 및/또는 `Content` 객체의 `language` 속성을 고려하는 것이 좋다. `wlang` 또는 `wlangb` 중 하나만 사용해야 한다. |
| `wlangb` | string 배열 | IETF BCP 47I를 사용한 광고 소재의 허용 언어 목록. 생략 시 특정 제한이 없지만, 구매자는 `Device` 및/또는 `Content` 객체의 `language` 속성을 고려하는 것이 좋다. `wlang` 또는 `wlangb` 중 하나만 사용해야 한다. |
| `acat` | string 배열 | 지정된 카테고리 분류법을 사용한 허용 광고주 카테고리 목록. 사용할 분류법은 `cattax` 필드로 정의된다. `cattax` 필드가 제공되지 않으면 IAB 콘텐츠 분류법 1.0이 기본값으로 사용된다. `acat` 또는 `bcat` 중 하나만 사용해야 한다. |
| `bcat` | string 배열 | 지정된 카테고리 분류법을 사용한 차단 광고주 카테고리 목록. 사용할 분류법은 `cattax` 필드로 정의된다. `cattax` 필드가 제공되지 않으면 IAB 콘텐츠 분류법 1.0이 기본값으로 사용된다. `acat` 또는 `bcat` 중 하나만 사용해야 한다. |
| `cattax` | integer; 기본값 1 | `bcat`에 사용되는 분류법. 값은 AdCOM 1.0 목록 [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참조한다. |
| `badv` | string 배열 | 도메인별 차단 광고주 목록(예: “ford.com”). |
| `bapp` | string 배열 | 앱 스토어 ID별 차단 애플리케이션 목록. CTV 앱 스토어에 대한 자세한 내용은 [OTT/CTV Store Assigned App Identification Guidelines](https://iabtechlab.com/wp-content/uploads/2020/08/IAB-Tech-Lab-OTT-store-assigned-App-Identification-Guidelines-2020.pdf)를 참조한다. Google Play Store의 모바일 앱은 번들 또는 패키지 이름(예: com.foo.mygame)을, Apple App Store의 앱은 숫자 ID를 사용해야 한다. |
| `source` | 객체 | 인벤토리 소스 및 최종 결정을 내리는 주체에 대한 데이터를 제공하는 `Source` 객체(3.2.2절 참조). |
| `regs` | 객체 | 이 요청에 적용되는 산업, 법률 또는 정부 규정을 지정하는 `Regs` 객체(3.2.3절 참조). |
| `ext` | 객체 | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.2 - 객체: 소스 <a name="objectsource"></a>

이 객체는 교환(Exchange) 상류에서 입찰 요청의 출처가 되는 엔티티의 성격과 동작을 설명한다. 주된 목적은 교환 자체가 최종 결정을 통제하지 않을 때, 경매 후 또는 상류 결정을 정의하는 것이다. 헤더 입딜(Header Bidding)이 대표적인 예이지만, 다른 RTB 교환, 중재 플랫폼, 광고 서버와 같은 상류 서버 엔티티가 직접 캠페인과 제3자 수요를 결합하여 결정하는 경우에도 적용할 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `fd` | 정수, 권장 | 최종 노출 판매 결정을 책임지는 엔티티. 0 = 교환, 1 = 상류 소스. |
| `tid` | 문자열, 권장 | 이 입찰 요청에 참여한 모든 참가자 간에 공통으로 사용해야 하는 트랜잭션 ID (예: 여러 교환). |
| `pchain` | 문자열, 권장 | TAG 결제 ID 프로토콜 v1.0에 설명된 임베디드 구문을 포함하는 결제 ID 체인 문자열. |
| `schain` | 객체, 권장 | 이 객체는 공급망의 링크와 공급망이 완료되었는지 여부를 나타내는 지표를 모두 나타낸다. 자세한 내용은 `SupplyChain` 객체(3.2.25절)를 참조. |
| `ext` | 객체 | OpenRTB에 대한 교환별 확장을 위한 플레이스홀더. |


### 3.2.3 - 객체: Regs <a name="objectregs"></a>

이 객체는 요청에 적용 가능한 법적, 정부, 또는 산업 규정을 포함한다. COPPA, GDPR 등을 지원하는 플래그에 대한 자세한 내용은 7.5절을 참고한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `coppa` | 정수 | 이 요청이 미국 FTC에서 정한 COPPA 규정의 적용을 받는지 여부를 나타내는 플래그. 0 = 아니오, 1 = 예. 자세한 내용은 7.5절을 참고한다. |
| `gdpr` | 정수 | 이 요청이 GDPR 규정의 적용을 받는지 여부를 나타내는 플래그. 0 = 아니오, 1 = 예, 생략 시 알 수 없음. 자세한 내용은 7.5절을 참고한다. |
| `us_privacy` | 문자열 | 미국 개인정보 보호 규정에 따른 소비자 개인정보 관련 시그널을 전달한다. [US Privacy String 명세](https://github.com/InteractiveAdvertisingBureau/USPrivacy/blob/master/CCPA/US%20Privacy%20String.md)를 참고한다. 자세한 내용은 7.5절을 참고한다. |
| `gpp` | 문자열 | Global Privacy Platform의 동의 문자열을 포함한다. [Global Privacy Platform 명세](https://github.com/InteractiveAdvertisingBureau/Global-Privacy-Platform)를 참고한다. |
| `gpp_sid` | 정수 배열 | 이 거래에 적용될 문자열의 섹션을 나타내는 배열. 일반적으로 하나의 값만 포함하지만, 둘 이상의 값이 적용될 수 있는 특수한 경우도 있다. GPP 섹션 3(헤더)과 4(시그널 무결성)은 포함할 필요가 없다. [GPP 섹션 정보](https://github.com/InteractiveAdvertisingBureau/Global-Privacy-Platform/blob/main/Sections/Section%20Information.md)를 참고한다. |
| `ext` | 객체 | OpenRTB의 교환별 확장을 위한 자리 표시자. |


### 3.2.4 - 객체: Imp <a name="objectimp"></a>

이 객체는 경매에 부쳐지는 광고 배치 또는 노출(impression)을 설명한다. 하나의 입찰 요청에는 여러 개의 `Imp` 객체가 포함될 수 있다. 예를 들어, 특정 페이지의 모든 광고 위치를 판매하는 거래소가 이런 사례에 해당한다. 각 `Imp` 객체는 필수적으로 ID를 가지며, 이 ID를 통해 입찰이 개별적으로 참조할 수 있다.

`Imp` 객체 하위에 `Banner` (3.2.6절), `Video` (3.2.7절), 그리고/또는 `Native` (3.2.9절) 객체가 존재하면, 이는 제공되는 노출의 타입을 나타낸다. 퍼블리셔는 일반적으로 하나의 타입을 선택하거나, 필요에 따라 여러 타입을 혼합할 수 있다. 그러나 특정 노출에 대한 입찰은 반드시 제공된 타입 중 하나를 따라야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string; 필수 | 입찰 요청 내에서 이 노출을 식별하는 고유한 ID (일반적으로 1부터 시작해 증가). |
| `metric` | 객체 배열 | `Metric` 객체 배열 (3.2.5절). |
| `banner` | 객체 | `Banner` 객체 (3.2.6절); 이 노출이 배너 광고 기회로 제공될 경우 필수. |
| `video` | 객체 | `Video` 객체 (3.2.7절); 이 노출이 비디오 광고 기회로 제공될 경우 필수. |
| `audio` | 객체 | `Audio` 객체 (3.2.8절); 이 노출이 오디오 광고 기회로 제공될 경우 필수. |
| `native` | 객체 | `Native` 객체 (3.2.9절); 이 노출이 네이티브 광고 기회로 제공될 경우 필수. |
| `pmp` | 객체 | 이 노출에 적용되는 프라이빗 마켓플레이스 거래를 포함하는 `Pmp` 객체 (3.2.11절). |
| `displaymanager` | string | 광고를 렌더링하는 광고 중개 파트너, SDK 기술, 또는 플레이어의 이름 (일반적으로 비디오 또는 모바일). 일부 광고 서버는 파트너별로 광고 코드를 커스터마이징하기 위해 사용한다.<br>비디오 및/또는 앱에 권장. |
| `displaymanagerver` | string | 광고를 렌더링하는 광고 중개 파트너, SDK 기술, 또는 플레이어의 버전 (일반적으로 비디오 또는 모바일). 일부 광고 서버는 파트너별로 광고 코드를 커스터마이징하기 위해 사용한다.<br>비디오 및/또는 앱에 권장. |
| `instl` | integer; 기본값 0 | 1 = 광고가 전면 광고 또는 전체 화면, 0 = 전면 광고 아님. |
| `tagid` | string | 경매를 시작하는 데 사용된 특정 광고 배치 또는 광고 태그의 식별자. 이는 문제 디버깅 또는 구매자의 최적화에 유용할 수 있다. |
| `bidfloor` | float; 기본값 0 | 이 노출에 대한 최소 입찰가 (CPM 기준). |
| `bidfloorcur` | string; 기본값 "USD" | ISO-4217 알파 코드로 지정된 통화. 거래소가 허용하는 경우, 입찰자가 반환한 통화와 다를 수 있다. 이 통화는 `Imp` 객체 내 모든 최소 입찰가의 기본값을 설정한다. |
| `clickbrowser` | integer | 앱 내에서 크리에이티브 클릭 시 열리는 브라우저 타입을 나타냄. 0 = 임베디드, 1 = 네이티브. iOS 9.x 기기의 Safari View Controller는 이 속성의 목적상 네이티브 브라우저로 간주된다. |
| `secure` | integer | 노출이 HTTPS URL 크리에이티브 자산과 마크업을 요구하는지 여부를 나타내는 플래그. 0 = 비보안, 1 = 보안. 생략 시 보안 상태는 알 수 없으나, 비보안 HTTP 지원이 가능하다고 가정할 수 있다. |
| `iframebuster` | string 배열 | 지원되는 iframe buster의 거래소별 이름 배열. |
| `rwdd` | integer; 기본값 0 | 사용자가 광고를 시청한 후 보상을 받는지 여부를 나타냄. 0 = 아니오, 1 = 예. 일반적으로 비디오 광고 구현에서 사용자는 추가 뉴스 기사를 무료로 읽거나, 게임에서 추가 생명을 받거나, 광고 없는 음악 세션을 얻을 수 있다. 보상은 일반적으로 비디오 광고가 완료된 후 제공된다. |
| `ssai` | integer; 기본값 0 | 서버 사이드 광고 삽입(예: 오디오 또는 비디오 스트림에 광고를 스티칭)이 사용 중인지 여부와 이에 따른 자산 및 트래커 검색의 영향을 나타냄. 0 = 상태 알 수 없음, 1 = 모든 클라이언트 사이드 (즉, 서버 사이드 아님), 2 = 자산은 서버 사이드에서 스티칭되지만 트래킹 픽셀은 클라이언트 사이드에서 발사, 3 = 모든 서버 사이드. |
| `exp` | integer | 경매와 실제 노출 사이에 경과할 수 있는 시간(초)에 대한 권고. |
| `qty` | 객체 | 입찰 요청에 승수를 전달하는 수단으로, 여러 사람에게 표시되는 광고의 총 노출 수를 나타낸다. |
| `dt` | float | 아이템이 이행될 것으로 예상되는 시점의 타임스탬프 (예: DOOH 노출이 표시될 시점)를 Unix 형식(에포크 이후 밀리초)으로 나타낸다. |
| `refresh` | 객체 | 자동으로 갱신되는 광고 슬롯에 대한 세부 정보. (3.2.33절) |
| `ext` | 객체 | OpenRTB의 거래소별 확장을 위한 자리 표시자. |


### 3.2.5 - 객체: Metric <a name="objectmetric"></a>

이 객체는 광고 노출과 관련된 메트릭 배열을 나타낸다. 이러한 메트릭은 최근 평균 가시성(viewability), 클릭률(click-through rate) 등과 같은 정보를 제공하여 의사결정을 지원한다. 각 메트릭은 타입으로 식별되며, 메트릭 값을 보고하고, 선택적으로 값을 측정한 소스나 벤더를 식별할 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `type` | string; 필수 | 메트릭의 타입을 나타내며, 교환소에서 정의한 문자열 이름을 사용한다. 이 이름은 사전에 입찰자들에게 공개되어야 한다. |
| `value` | float; 필수 | 메트릭의 값을 나타내는 숫자이다. 확률은 0.0에서 1.0 사이의 범위여야 한다. |
| `vendor` | string; 권장 | 값을 측정한 소스를 나타내며, 교환소에서 정의한 문자열 이름을 사용한다. 이 이름은 사전에 입찰자들에게 공개되어야 한다. 교환소 자체가 소스인 경우 "EXCHANGE"를 사용하는 것이 권장된다. |
| `ext` | object | OpenRTB에 대한 교환소별 확장을 위한 자리 표시자이다. |


### 3.2.6 - 객체: 배너 <a name="objectbanner"></a>

이 객체는 가장 일반적인 유형의 광고 노출을 나타낸다. "배너"라는 용어가 다른 맥락에서 특정한 의미를 가질 수 있지만, 여기서는 단순한 정적 이미지, 확장 가능한 광고 유닛, 심지어는 배너 내 비디오까지 다양한 형태를 포함할 수 있다(더 일반적이고 기능이 풍부한 비디오 광고 유닛에 대해서는 3.2.7절의 `Video` 객체를 참조). `Banner` 객체 배열은 VAST 사양에서 정의된 옵션 동반 광고를 설명하기 위해 `Video` 객체 내에 나타날 수도 있다.

`Imp` 객체의 하위 객체로 `Banner`가 존재한다는 것은 이 노출이 배너 유형의 노출로 제공된다는 것을 의미한다. 게시자의 판단에 따라 동일한 노출을 비디오, 오디오, 네이티브 등 다른 유형으로도 제공할 수 있으며, 이 경우 해당 유형의 객체를 `Imp`의 하위 객체로 포함시킬 수 있다. 그러나 노출에 대한 입찰은 제공된 유형 중 하나를 따라야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `format` | 객체 배열;<br>권장 | 허용된 배너 크기를 나타내는 포맷 객체 배열(3.2.10절 참조). 지정되지 않은 경우, `h`와 `w` 속성을 사용하는 것이 적극 권장된다. |
| `w` | 정수 | 디바이스 독립적 픽셀(DIPS) 단위의 정확한 너비. `Format` 객체가 지정되지 않은 경우 권장된다. |
| `h` | 정수 | 디바이스 독립적 픽셀(DIPS) 단위의 정확한 높이. `Format` 객체가 지정되지 않은 경우 권장된다. |
| `btype` | 정수 배열 | 차단된 배너 광고 유형.<br>값:<br>1 = XHTML 텍스트 광고,<br>2 = XHTML 배너 광고,<br>3 = JavaScript 광고,<br>4 = iframe. |
| `battr` | 정수 배열 | 차단된 크리에이티브 속성. AdCOM 1.0의 [리스트: 크리에이티브 속성](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-) 참조. |
| `pos` | 정수 | 화면 상의 광고 위치. AdCOM 1.0의 [리스트: 배치 위치](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--placement-positions-) 참조. |
| `mimes` | 문자열 배열 | 지원되는 콘텐츠 MIME 타입. 일반적인 MIME 타입으로는 `“image/jpeg”`와 `“image/gif”` 등이 있다. |
| `topframe` | 정수 | 배너가 iframe이 아닌 최상위 프레임에 있는지 여부를 나타내며, 0 = 아니오, 1 = 예. |
| `expdir` | 정수 배열 | 배너가 확장될 수 있는 방향. AdCOM 1.0의 [리스트: 확장 가능한 방향](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--expandable-directions-) 참조. |
| `api` | 정수 배열 | 이 노출에 지원되는 API 프레임워크 목록. AdCOM 1.0의 [리스트: API 프레임워크](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--api-frameworks-) 참조. 명시적으로 나열되지 않은 API는 지원되지 않는 것으로 간주된다. |
| `id` | 문자열 | 이 배너 객체의 고유 식별자. `Banner` 객체가 `Video` 객체(3.2.7절 참조)와 함께 사용되어 동반 광고 배열을 나타낼 때 권장된다. 값은 일반적으로 1부터 시작하며 각 객체마다 증가한다. 노출 내에서 고유해야 한다. |
| `vcm` | 정수 | 동반 광고 배열에서 `Video` 객체(3.2.7절 참조)와 함께 사용되는 `Banner` 객체에만 관련이 있다. 관련 비디오에 대한 동반 배너 렌더링 모드를 나타내며, 0 = 동시, 1 = 엔드 카드. |
| `ext` | 객체 | OpenRTB에 대한 거래소별 확장을 위한 자리 표시자. |


### 3.2.7 - 객체: 비디오 <a name="objectvideo"></a>

이 객체는 비디오 광고 노출을 나타낸다. 많은 필드가 최소한의 거래에는 필수적이지 않지만, 필요할 때 세밀한 제어를 제공하기 위해 포함된다. OpenRTB에서 비디오는 일반적으로 VAST 표준을 준수한다고 가정한다. 따라서, 동반 광고의 개념은 `Banner` 객체 배열(3.2.6절의 `Banner` 객체 참조)을 선택적으로 포함하여 지원한다.

`Imp` 객체의 하위로 `Video` 객체가 존재한다면, 이 노출이 비디오 타입의 노출로 제공됨을 의미한다. 게시자의 판단에 따라 동일한 노출을 `Banner`, `Audio`, 그리고/또는 `Native` 타입으로도 제공할 수 있다. 이 경우 해당 타입의 객체를 `Imp`의 하위 객체로 포함시킨다. 그러나 특정 입찰은 제공된 타입 중 하나에 맞춰야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `mimes` | 문자열 배열; 필수 | 지원하는 콘텐츠 MIME 타입 (예: `"video/mp4"`). |
| `minduration` | 정수; 기본값 0 권장 | 비디오 광고의 최소 지속 시간(초). 이 필드는 `rqddurs`와 상호 배타적이며, `minduration`과 `rqddurs` 중 하나만 입찰 요청에 포함될 수 있다. |
| `maxduration` | 정수; 권장 | 비디오 광고의 최대 지속 시간(초). 이 필드는 `rqddurs`와 상호 배타적이며, `maxduration`과 `rqddurs` 중 하나만 입찰 요청에 포함될 수 있다. |
| `startdelay` | 정수; 권장 | 프리롤, 미드롤, 포스트롤 광고 배치의 시작 지연 시간(초). AdCOM 1.0의 [목록: 시작 지연 모드](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--start-delay-modes-) 참조. |
| `maxseq` | 정수; 권장 | "동적" 비디오 광고 팟에 제공될 수 있는 최대 광고 수. 판매자가 정확한 광고 수를 미리 정하지 않은 경우에 사용된다. 자세한 내용은 7.6절 참조. |
| `poddur` | 정수; 권장 | "동적" 비디오 광고 팟(7.6절 참조) 또는 "하이브리드" 광고 팟의 동적 부분에 광고주가 채울 수 있는 총 시간(초). 이 필드는 비디오 광고 팟의 동적 부분에만 필수이다. 이 필드는 전체 광고 브레이크의 길이를 나타내며, `minduration`/`maxduration`/`rqddurs`는 팟을 구성하는 슬롯에 대한 제약 조건이다. |
| `protocols` | 정수 배열; 권장 | 지원하는 비디오 프로토콜 배열. AdCOM 1.0의 [목록: 크리에이티브 서브타입 - 오디오/비디오](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-subtypes---audiovideo-) 참조. |
| `w` | 정수; 권장 | 비디오 플레이어의 너비(디바이스 독립적 픽셀, DIPS). |
| `h` | 정수; 권장 | 비디오 플레이어의 높이(디바이스 독립적 픽셀, DIPS). |
| `podid` | 문자열 | 비디오 광고 팟에 속한 노출 기회의 고유 식별자. 입찰 요청 내의 여러 노출 기회가 동일한 `podid`를 공유한다면, 이는 해당 노출 기회가 동일한 비디오 광고 팟에 속함을 의미한다. |
| `podseq` | 정수; 기본값 0 | 콘텐츠 스트림 내에서 비디오 광고 팟의 순서(위치). 이 필드 사용에 대한 지침은 [AdCOM 1.0](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_podsequence) 참조. |
| `rqddurs` | 정수 배열 | 비디오 크리에이티브의 정확한 허용 지속 시간(초). 이 필드는 라이브 TV 사용 사례를 대상으로 하며, 정확하지 않은 광고 지속 시간이 원치 않는 '공백 시간'을 초래할 경우 사용된다. 이 필드는 `minduration` 및 `maxduration`과 상호 배타적이다. `rqddurs`가 지정되면 `minduration` 및 `maxduration`은 지정할 수 없고 그 반대도 마찬가지이다. |
| `placement` | 정수; 사용 중단 | OpenRTB 2.6-202303부터 사용 중단. 대신 `plcmt`를 사용. |
| `plcmt` | 정수 | 노출의 비디오 배치 타입. AdCOM 1.0의 [목록: 배치 서브타입 - 비디오](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/develop/AdCOM%20v1.0%20FINAL.md#list_plcmtsubtypesvideo) 참조. |
| `linearity` | 정수 | 노출이 선형, 비선형 등이어야 하는지 여부. 지정되지 않으면 모두 허용됨으로 가정. AdCOM 1.0의 [목록: 선형성 모드](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--linearity-modes-) 참조. 이 필드는 예상되는 VAST 응답을 설명하며, 배치가 인스트림, 아웃스트림 등인지 여부는 아니다. 이는 `placement`를 참조. |
| `skip` | 정수 | 플레이어가 비디오를 건너뛰도록 허용하는지 여부. 0 = 아니오, 1 = 예.<br>입찰자가 건너뛸 수 있는 마크업/크리에이티브를 보낸다면, `Bid` 객체는 건너뛸 수 있는 비디오를 나타내는 `attr` 배열에 16번 요소를 포함해야 한다. AdCOM 1.0의 [목록: 크리에이티브 속성](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-) 참조. |
| `skipmin` | 정수; 기본값 0 | 총 지속 시간이 이 값(초)보다 큰 비디오는 건너뛸 수 있다. 광고가 건너뛸 수 있는 경우에만 적용. |
| `skipafter` | 정수; 기본값 0 | 비디오가 재생된 후 건너뛰기가 활성화되기 전까지의 시간(초). 광고가 건너뛸 수 있는 경우에만 적용. |
| `sequence` | 정수; 기본값 0<br>사용 중단 | OpenRTB 2.6부터 사용 중단. `slotinpod`를 사용. |
| `slotinpod` | 정수; 기본값 0 | 비디오 광고 팟의 경우, 이 값은 판매자가 팟 내의 특정 슬롯 위치에 대해 전달을 보장할 수 있음을 나타낸다. 이 필드 사용에 대한 지침은 AdCOM 1.0의 [목록: 팟 내 슬롯 위치](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--slot-position-in-pod-) 참조. |
| `mincpmpersec` | 실수 | 초당 최소 CPM. 이는 비디오 광고 팟의 "동적" 부분에 대한 가격 하한으로, 광고주가 제출할 수 있는 입찰의 지속 시간에 상대적이다. |
| `battr` | 정수 배열 | 차단된 크리에이티브 속성. AdCOM 1.0의 [목록: 크리에이티브 속성](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-) 참조. |
| `maxextended` | 정수 | 확장이 허용되는 경우 최대 확장 광고 지속 시간. 비어 있거나 0이면 확장이 허용되지 않음. -1이면 확장이 허용되며 시간 제한이 없음. 0보다 크면 이 값은 `maxduration` 값 이상으로 지원되는 확장 재생 시간(초)을 나타낸다. |
| `minbitrate` | 정수 | 최소 비트레이트(Kbps, 초당 킬로비트). |
| `maxbitrate` | 정수 | 최대 비트레이트(Kbps, 초당 킬로비트). |
| `boxingallowed` | 정수; 기본값 1 | 4:3 콘텐츠를 16:9 윈도우에 레터박싱할 수 있는지 여부. 0 = 아니오, 1 = 예. |
| `playbackmethod` | 정수 배열 | 사용 가능한 재생 방법. 지정되지 않으면 어떤 방법도 사용 가능. AdCOM 1.0의 [목록: 재생 방법](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--playback-methods-) 참조. 실제로는 일반적으로 하나의 방법만 사용된다. 따라서 이 배열은 향후 버전에서 정수로 변환될 수 있다. 이 변경을 대비해 배열의 첫 번째 요소만 사용하는 것이 좋다. |
| `playbackend` | 정수 | 재생이 종료되는 이벤트. AdCOM 1.0의 [목록: 재생 종료 모드](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--playback-cessation-modes-) 참조. |
| `delivery` | 정수 배열 | 지원하는 전달 방법 (예: 스트리밍, 프로그레시브). 지정되지 않으면 모두 지원됨으로 가정. AdCOM 1.0의 [목록: 전달 방법](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--delivery-methods-) 참조. |
| `pos` | 정수 | 화면 상의 광고 위치. AdCOM 1.0의 [목록: 배치 위치](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--placement-positions-) 참조. |
| `companionad` | 객체 배열 | 동반 광고가 있는 경우 `Banner` 객체 배열(3.2.6절). |
| `api` | 정수 배열 | 이 노출에 대해 지원되는 API 프레임워크 목록. AdCOM 1.0의 [목록: API 프레임워크](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--api-frameworks-) 참조. 명시적으로 나열되지 않은 API는 지원되지 않음으로 가정. |
| `companiontype` | 정수 배열 | 지원되는 VAST 동반 광고 타입. AdCOM 1.0의 [목록: 동반 타입](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--companion-types-) 참조. `companionad` 배열을 통해 `Banner` 객체가 포함된 경우 권장. 이러한 배너 중 하나가 엔드 카드로 렌더링될 경우, 특정 배너에 `vcm` 속성을 사용하여 지정할 수 있다(3.2.6절). |
| `poddedupe` | 열거형 배열<br>임시 | 입찰 응답에 적용될 팟 중복 제거 설정. AdCOM 1.0의 [목록: 팟 중복 제거 설정](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/main/AdCOM%20v1.0%20FINAL.md#list--pod-deduplication-settings-) 참조. |
| `durfloors` | 객체 배열 | 다양한 지속 시간의 비디오 크리에이티브에 대한 입찰 가격 하한을 나타내는 `DurFloors` 객체 배열(3.2.35절). |
| `ext` | 객체 | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.8 - 오디오 객체 <a name="objectaudio"></a>

이 객체는 오디오 타입의 광고 노출을 나타낸다. 많은 필드가 최소한의 거래를 위해 필수적이지는 않지만, 필요할 때 세밀한 제어를 제공하기 위해 포함되었다. OpenRTB에서 오디오는 일반적으로 VAST 표준을 준수한다고 가정한다. 따라서, 동반 광고의 개념은 선택적으로 `Banner` 객체 배열을 포함함으로써 지원된다. 이 배열은 동반 광고를 정의한다. (3.2.6절의 `Banner` 객체 참조)

`Imp` 객체의 하위 객체로 `Audio` 객체가 존재한다면, 이 노출이 오디오 타입으로 제공된다는 것을 의미한다. 출판사의 재량에 따라 동일한 노출이 `Banner`, `Video`, 그리고/또는 `Native` 타입으로도 제공될 수 있다. 이 경우 해당 타입의 객체도 `Imp`의 하위 객체로 포함된다. 그러나 해당 노출에 대한 입찰은 제공된 타입 중 하나에 맞춰야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `mimes` | 문자열 배열; 필수 | 지원하는 콘텐츠 MIME 타입 (예: `"audio/mp4"`). |
| `minduration` | 정수; 기본값 0 권장 | 최소 오디오 광고 지속 시간(초). 이 필드는 `rqddurs`와 상호 배타적이다. `minduration`과 `rqddurs` 중 하나만 입찰 요청에 포함될 수 있다. |
| `maxduration` | 정수; 권장 | 최대 오디오 광고 지속 시간(초). 이 필드는 `rqddurs`와 상호 배타적이다. `maxduration`과 `rqddurs` 중 하나만 입찰 요청에 포함될 수 있다. |
| `poddur` | 정수; 권장 | "동적" 오디오 광고 팟 또는 "하이브리드" 광고 팟의 동적 부분에 대해 광고주가 채울 수 있는 총 시간을 나타낸다. 이 필드는 오디오 광고 팟의 동적 부분에만 필요하다. 이 필드는 전체 광고 브레이크의 길이를 나타내며, `minduration`/`maxduration`/`rqddurs`는 팟을 구성하는 슬롯에 대한 제약 조건을 나타낸다. |
| `protocols` | 정수 배열; 권장 | 지원하는 오디오 프로토콜 배열. AdCOM 1.0의 [리스트: 크리에이티브 서브타입 - 오디오/비디오](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-subtypes---audiovideo-) 참조. |
| `startdelay` | 정수; 권장 | 프리롤, 미드롤, 포스트롤 광고 배치에 대한 시작 지연 시간(초). AdCOM 1.0의 [리스트: 시작 지연 모드](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--start-delay-modes-) 참조. |
| `rqddurs` | 정수 배열 | 오디오 크리에이티브의 정확한 허용 지속 시간(초). 이 필드는 라이브 오디오/라디오 사용 사례를 대상으로 하며, 정확하지 않은 광고 지속 시간은 바람직하지 않은 '데드 에어'를 초래할 수 있다. 이 필드는 `minduraiton` 및 `maxduration`과 상호 배타적이다. `rqddurs`가 지정된 경우 `minduraiton` 및 `maxduration`은 지정되지 않아야 하며, 그 반대도 마찬가지이다. |
| `podid` | 문자열 | 광고 노출 기회가 오디오 광고 팟에 속한다는 것을 나타내는 고유 식별자. 입찰 요청 내의 여러 광고 노출 기회가 동일한 `podid`를 공유한다면, 이는 해당 광고 노출 기회가 동일한 오디오 광고 팟에 속한다는 것을 나타낸다. |
| `podseq` | 정수; 기본값 0 | 콘텐츠 스트림 내에서 오디오 광고 팟의 순서(위치). 이 필드 사용에 대한 지침은 AdCOM 1.0의 [리스트: 팟 순서](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--pod-sequence-) 참조. |
| `sequence` | 정수; 기본값 0<br>더 이상 사용되지 않음 | OpenRTB 2.6부터 더 이상 사용되지 않음. `slotinpod`를 사용하라. |
| `slotinpod` | 정수; 기본값 0 | 오디오 광고 팟의 경우, 이 값은 판매자가 팟 내 특정 슬롯 위치에 대해 전달을 보장할 수 있음을 나타낸다. 이 필드 사용에 대한 지침은 AdCOM 1.0의 [리스트: 팟 내 슬롯 위치](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--slot-position-in-pod-) 참조. |
| `mincpmpersec` | 실수 | 초당 최소 CPM. 이는 오디오 광고 팟의 "동적" 부분에 대한 가격 하한으로, 광고주가 제출할 수 있는 입찰의 지속 시간에 상대적이다. |
| `battr` | 정수 배열 | 차단된 크리에이티브 속성. AdCOM 1.0의 [리스트: 크리에이티브 속성](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-) 참조. |
| `maxextended` | 정수 | 확장이 허용되는 경우 최대 확장 광고 지속 시간. 비어 있거나 0이면 확장이 허용되지 않는다. -1이면 확장이 허용되며, 시간 제한이 없다. 0보다 크면 이 값은 `maxduration` 값을 초과하여 지원되는 확장 재생 시간(초)을 나타낸다. |
| `minbitrate` | 정수 | 최소 비트레이트(Kbps). |
| `maxbitrate` | 정수 | 최대 비트레이트(Kbps). |
| `delivery` | 정수 배열 | 지원하는 전달 방법(예: 스트리밍, 프로그레시브). 지정되지 않은 경우 모든 방법이 지원된다고 가정한다. AdCOM 1.0의 [리스트: 전달 방법](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--delivery-methods-) 참조. |
| `companionad` | 객체 배열 | 동반 광고가 있는 경우 `Banner` 객체 배열 (3.2.6절 참조). |
| `api` | 정수 배열 | 이 노출에 대해 지원하는 API 프레임워크 목록. AdCOM 1.0의 [리스트: API 프레임워크](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--api-frameworks-) 참조. 명시적으로 나열되지 않은 API는 지원되지 않는다고 가정한다. |
| `companiontype` | 정수 배열 | 지원하는 동반 광고 타입. AdCOM 1.0의 [리스트: 동반 타입](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--companion-types-) 참조. `companionad` 배열을 통해 `Banner` 객체가 포함된 경우 권장된다. |
| `maxseq` | 정수 | 광고 팟에서 재생할 수 있는 최대 광고 수. |
| `feed` | 정수 | 오디오 피드 타입. AdCOM 1.0의 [리스트: 피드 타입](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--feed-types-) 참조. |
| `stitched` | 정수 | 광고가 오디오 콘텐츠와 함께 스티치되었는지 또는 독립적으로 전달되었는지를 나타낸다. 0=아니오, 1=예. |
| `nvol` | 정수 | 볼륨 정규화 모드. AdCOM 1.0의 [리스트: 볼륨 정규화 모드](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--volume-normalization-modes-) 참조. |
| `durfloors` | 객체 배열 | 다양한 지속 시간의 오디오 크리에이티브에 대한 입찰가 하한을 나타내는 `DurFloors` 객체 배열 (3.2.35절 참조). |
| `ext` | 객체 | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.9 - 네이티브 광고 객체 <a name="objectnative"></a>

이 객체는 네이티브 타입 광고를 나타낸다. 네이티브 광고 유닛은 주변 콘텐츠와 자연스럽게 어우러지도록 설계되었다(예: 스폰서 Twitter 또는 Facebook 게시물). 따라서, 응답은 구조화되어 있어야 하며, 이를 통해 게시자가 렌더링을 세밀하게 제어할 수 있어야 한다.

네이티브 서브커미티는 OpenRTB와 함께 사용할 수 있는 동반 스펙인 <a href="https://iabtechlab.com/standards/openrtb-native/">Dynamic Native Ads API</a>를 개발했다. 이 스펙은 네이티브 광고 유닛의 요청 파라미터와 응답 마크업 구조를 정의한다. 이 객체는 요청 파라미터를 불투명한 문자열로 전달하는 수단을 제공하며, 이를 통해 특정 파라미터는 Dynamic Native Ads API의 지침 하에 별도로 발전할 수 있다. 마찬가지로, 제공되는 광고 마크업도 해당 스펙에 따라 구조화된다.

`Imp` 객체의 하위에 `Native` 객체가 존재한다는 것은 해당 광고가 네이티브 타입으로 제공됨을 나타낸다. 게시자의 재량에 따라 동일한 광고를 `Banner`, `Video`, `Audio` 타입으로도 제공할 수 있으며, 이 경우 `Imp` 객체의 하위에 해당 타입의 객체를 포함시켜야 한다. 그러나, 광고에 대한 입찰은 제공된 타입 중 하나를 준수해야 한다.


| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `request` | string; 필수 | [네이티브 광고 스펙](https://iabtechlab.com/standards/openrtb-native/)을 준수하는 요청 페이로드. 네이티브 광고 스펙 1.1에서는 페이로드의 루트 노드인 "native"가 제거되었다.<br>네이티브 1.0의 경우, 이는 이름 없는 루트 객체로 구성된 JSON 인코딩 문자열이며, 'native'라는 이름의 단일 하위 객체를 포함한다. 이 객체는 OpenRTB 네이티브 1.0 스펙의 4.1절에 정의된 네이티브 마크업 요청 객체이다.<br>네이티브 1.1 이상의 경우, 이는 이름 없는 루트 객체로 구성된 JSON 인코딩 문자열이며, 이 객체 자체가 OpenRTB 네이티브 1.1+ 스펙의 4.1절에 정의된 네이티브 마크업 요청 객체이다. |
| `ver` | string; 권장 | `request`가 준수하는 Dynamic Native Ads API 버전. 효율적인 파싱을 위해 매우 권장된다. |
| `api` | integer 배열 | 이 광고에서 지원하는 API 프레임워크 목록. AdCOM의 [API 프레임워크 목록](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--api-frameworks-)을 참조한다. 명시적으로 나열되지 않은 API는 지원되지 않는 것으로 간주된다. |
| `battr` | integer 배열 | 차단된 크리에이티브 속성. AdCOM의 [크리에이티브 속성 목록](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-)을 참조한다. |
| `ext` | object | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.10 - 객체: 형식 <a name="objectformat"></a>

이 객체는 배너 광고 노출에 허용되는 크기(즉, 높이와 너비 조합) 또는 플렉스 광고 매개변수를 나타낸다. 일반적으로 여러 크기가 허용되는 배열에서 사용된다. `w`/`h` 쌍 또는 `wratio`/`hratio`/`wmin` 세트(즉, 플렉스 광고용) 중 하나를 지정하는 것이 권장된다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `w` | 정수 | 디바이스 독립적 픽셀(DIPS) 단위의 너비. |
| `h` | 정수 | 디바이스 독립적 픽셀(DIPS) 단위의 높이. |
| `wratio` | 정수 | 비율로 크기를 표현할 때의 상대적 너비. |
| `hratio` | 정수 | 비율로 크기를 표현할 때의 상대적 높이. |
| `wmin` | 정수 | 광고가 비율로 크기를 표현할 때 표시될 최소 너비(디바이스 독립적 픽셀, DIPS). |
| `ext` | 객체 | OpenRTB의 교환별 확장을 위한 플레이스홀더. |


### 3.2.11 - 객체: Pmp <a name="objectpmp"></a>

이 객체는 구매자와 판매자 간의 직접 거래를 위한 프라이빗 마켓플레이스 컨테이너로, 해당 광고 노출과 관련된 거래를 포함한다. 실제 거래는 `Deal` 객체의 컬렉션으로 표현된다. 더 자세한 내용은 7.3절을 참조한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `private_auction` | 정수; 기본값 0 | Direct Deals 객체에 명시된 시트에 대한 경매 참여 자격을 나타내는 지표. 0=모든 입찰이 허용됨, 1=명시된 거래 및 그 조건에 따라 입찰이 제한됨. |
| `deals` | 객체 배열 | 해당 광고 노출에 적용 가능한 특정 거래를 전달하는 `Deal` (3.2.12절) 객체의 배열. |
| `ext` | 객체 | OpenRTB에 대한 거래소별 확장을 위한 자리 표시자. |


### 3.2.12 - 객체: 거래 <a name="objectdeal"></a>

이 객체는 구매자와 판매자 간에 체결된 특정 거래를 나타낸다. `Pmp` 컬렉션과 함께 사용되면, 이 객체는 해당 거래 조건 하에서 노출이 가능함을 의미한다. 더 자세한 내용은 7.3절을 참고한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | 문자열; 필수 | 직접 거래를 위한 고유 식별자. |
| `bidfloor` | 실수; 기본값 0 | CPM으로 표현된 이 노출에 대한 최소 입찰가. |
| `bidfloorcur` | 문자열; 기본값 "USD" | ISO-4217 알파 코드로 지정된 통화. 이 값은 입찰자가 반환한 입찰 통화와 다를 수 있으며, 거래소가 이를 허용할 경우 사용된다. 이 필드는 `Imp.bidfloorcur`로부터 상속되지 않으며, 명시적으로 지정되거나 기본값인 USD로 설정된다. |
| `at` | 정수 | 입찰 요청의 전체 경매 타입을 재정의하는 선택적 속성. 1 = 첫 번째 가격, 2 = 두 번째 가격 플러스, 3 = `bidfloor`에 전달된 값이 합의된 거래 가격임을 나타낸다. 추가 경매 타입은 거래소에서 정의할 수 있다. |
| `wseat` | 문자열 배열 | 이 거래에 입찰할 수 있는 구매자 좌석(예: 광고주, 대행사)의 허용 목록. 좌석 ID와 해당 구매자 고객은 입찰자와 거래소 간에 사전에 조정되어야 한다. 생략 시 좌석 제한이 없음을 의미한다. |
| `wadomain` | 문자열 배열 | 이 거래에 입찰할 수 있는 광고주 도메인(예: advertiser.com)의 배열. 생략 시 광고주 제한이 없음을 의미한다. |
| `guar` | 정수, 기본값 0 | 이 거래가 `보장된` 타입임을 나타내며, 입찰자는 반드시 이 거래에 입찰해야 한다. 0 = 보장된 거래 아님, 1 = 보장된 거래. |
| `mincpmpersec` | 실수 | 초당 최소 CPM. 이는 비디오 또는 오디오 노출 기회에 대한 가격 하한으로, 광고주가 제출할 수 있는 입찰의 지속 시간을 기준으로 한다. |
| `durfloors` | 객체 배열 | 지속 시간별 가격 하한 정보를 담는 컨테이너. 비디오 또는 오디오 수요에 적합한 거래일 경우 사용된다. DurFloors 객체의 배열(3.2.35절 참고). |
| `ext` | 객체 | OpenRTB에 대한 거래소별 확장을 위한 자리 표시자. |


### 3.2.13 - 객체: 사이트 <a name="objectsite"></a>

이 객체는 광고가 지원되는 콘텐츠가 비브라우저 애플리케이션이나 디지털 아웃오브홈(DOOH) 인벤토리가 아닌 웹사이트인 경우 포함해야 한다. 하나의 입찰 요청에는 `Site`, `App`, `DOOH` 객체 중 하나만 포함될 수 있다. 최소한 사이트 ID나 페이지 URL을 제공하는 것이 유용하지만, 이는 필수 요구사항은 아니다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string; 권장 | 교환별 사이트 ID. |
| `name` | string | 사이트 이름 (출판사 요청에 따라 별칭이 사용될 수 있음). |
| `domain` | string | 사이트 도메인 (예: "mysite.foo.com"). |
| `cattax` | integer; 기본값 1 | 사용 중인 카테고리 분류 체계. 값은 AdCOM [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참조하라. cattax 필드가 제공되지 않으면 IAB 콘텐츠 카테고리 분류 체계 1.0이 기본값으로 사용된다. |
| `cat` | string 배열 | 사이트의 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. |
| `sectioncat` | string 배열 | 사이트의 현재 섹션을 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. |
| `pagecat` | string 배열 | 사이트의 현재 페이지 또는 뷰를 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. |
| `page` | string | 광고가 표시될 페이지의 URL. |
| `ref` | string | 현재 페이지로의 네비게이션을 유발한 리퍼러 URL. |
| `search` | string | 현재 페이지로의 네비게이션을 유발한 검색어. |
| `mobile` | integer | 사이트가 모바일 기기에서 보기 좋게 레이아웃 최적화가 되어 있는지 여부를 나타낸다. 0=아니오, 1=예. |
| `privacypolicy` | integer | 사이트가 개인정보 보호정책을 가지고 있는지 여부를 나타낸다. 0=아니오, 1=예. |
| `publisher` | object | 사이트의 출판사에 대한 세부 정보 (3.2.15 섹션 참조). |
| `content` | object | 사이트 내 콘텐츠에 대한 세부 정보 (3.2.16 섹션 참조). |
| `keywords` | string | 사이트와 관련된 키워드의 쉼표로 구분된 목록. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `kwarray` | string 배열 | 사이트와 관련된 키워드 배열. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `inventorypartnerdomain` | string | 사이트 소유자와 콘텐츠 소유자 간의 인벤토리 공유 협정 시 인벤토리 권한 부여를 위해 사용되는 도메인. 이 필드는 일반적으로 권한 크롤러가 콘텐츠 소유자의 도메인을 확인하는 데 사용되며, 콘텐츠 소유자는 사이트 내 일부 광고 인벤토리를 수익화할 권리를 가진다. 콘텐츠 소유자의 도메인은 사이트 소유자의 ads.txt 파일에 `inventorypartnerdomain`으로 등록되어야 한다. `inventorypartnerdomain`에서의 공급 권한은 해당 도메인의 루트에 있는 ads.txt 파일에 게시된다. 자세한 내용은 [ads.txt 1.1 스펙](https://iabtechlab.com/wp-content/uploads/2022/04/Ads.txt-1.1.pdf)을 참조하라. |
| `ext` | object | OpenRTB의 교환별 확장을 위한 자리 표시자. |


### 3.2.14 - 객체: App <a name="objectapp"></a>

이 객체는 광고 지원 콘텐츠가 웹사이트가 아닌 비브라우저 애플리케이션(주로 모바일)일 때 포함해야 한다. 하나의 입찰 요청에는 `Site`, `App`, `DOOH` 객체 중 하나만 포함할 수 있다. 최소한 App ID나 번들을 제공하는 것이 유용하지만, 이는 필수 사항은 아니다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string; 권장 | 거래소별 앱 ID. |
| `name` | string | 앱 이름 (퍼블리셔 요청에 따라 별칭일 수 있음). |
| `bundle` | string | 앱 스토어에서의 앱 스토어 ID. CTV 앱 스토어의 예상 문자열에 대한 자세한 내용은 [OTT/CTV 스토어 할당 앱 식별 가이드라인](https://iabtechlab.com/wp-content/uploads/2020/08/IAB-Tech-Lab-OTT-store-assigned-App-Identification-Guidelines-2020.pdf)을 참고한다. Google Play 스토어의 모바일 앱은 번들 또는 패키지 이름(예: com.foo.mygame)이어야 한다. Apple App 스토어의 앱은 숫자 ID여야 한다. |
| `domain` | string | 앱의 도메인 (예: "mygame.foo.com"). |
| `storeurl` | string | 설치된 앱의 앱 스토어 URL; IQG 2.1 준수를 위해 필요. |
| `cattax` | integer; 기본값 1 | 사용 중인 분류 체계. 값은 AdCOM [목록: 카테고리 분류](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참고한다. |
| `cat` | string array | 앱의 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. cattax 필드가 제공되지 않으면 Content Category Taxonomy 1.0이 기본값으로 사용된다. |
| `sectioncat` | string array | 앱의 현재 섹션을 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. |
| `pagecat` | string array | 앱의 현재 페이지 또는 뷰를 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. |
| `ver` | string | 애플리케이션 버전. |
| `privacypolicy` | integer | 앱에 개인정보 보호정책이 있는지 여부, 0 = 없음, 1 = 있음. |
| `paid` | integer | 0 = 무료 앱, 1 = 유료 버전 앱. |
| `publisher` | object | 앱의 퍼블리셔에 대한 세부 정보 (3.2.15 섹션 참고). |
| `content` | object | 앱 내 콘텐츠에 대한 세부 정보 (3.2.16 섹션 참고). |
| `keywords` | string | 앱에 대한 키워드 목록(쉼표로 구분). `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `kwarray` | string array | 앱에 대한 키워드 배열. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `inventorypartnerdomain` | string | 앱 소유자와 콘텐츠 소유자 간의 인벤토리 공유 협약 시 인벤토리 인증에 사용되는 도메인. 이 필드는 일반적으로 콘텐츠 소유자의 도메인을 확인하기 위해 인증 크롤러에 사용되며, 콘텐츠 소유자는 앱 내 일부 광고 인벤토리를 수익화할 권리가 있다. 콘텐츠 소유자의 도메인은 앱 소유자의 app-ads.txt 파일에 `inventorypartnerdomain`으로 등록되어야 한다. `inventorypartnerdomain`에서의 공급 인증은 해당 도메인의 루트에 있는 ads.txt 파일에 게시된다. 자세한 내용은 [ads.txt 1.1 스펙](https://iabtechlab.com/wp-content/uploads/2022/04/Ads.txt-1.1.pdf)을 참고한다. |
| `ext` | object | OpenRTB에 대한 거래소별 확장을 위한 플레이스홀더. |


### 3.2.15 - 오브젝트: Publisher <a name="objectpublisher"></a>

이 오브젝트는 교환소에 직접 인벤토리를 공급하고 교환소로부터 결제를 받는 주체를 설명한다. 이는 출판사, 중개 교환소, 광고 네트워크 등이 될 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 교환소별 판매자 ID. 각 ID는 해당 ID를 통해 거래된 인벤토리에 대해 결제를 받는 단일 주체에만 매핑되어야 한다. 교환소의 sellers.json 파일에 있는 `seller_id`와 일치한다. |
| `name` | string | 판매자 이름 (판매자의 요청에 따라 별칭이 사용될 수 있음). |
| `cattax` | integer; 기본값 1 | 사용 중인 분류 체계. AdCOM의 [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)에서 값을 참조한다. |
| `cat` | string 배열 | 출판사의 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. cattax 필드가 제공되지 않으면 Content Category Taxonomy 1.0이 기본값으로 사용된다. |
| `domain` | string | 판매자의 최상위 도메인 (예: "seller.com"). |
| `ext` | object | OpenRTB에 대한 교환소별 확장을 위한 자리 표시자. |


### 3.2.16 - 객체: 콘텐츠 <a name="objectcontent"></a>

이 객체는 광고가 표시될 콘텐츠를 설명한다. 이 콘텐츠는 신디케이션된 콘텐츠 또는 비신디케이션된 콘텐츠일 수 있다. 신디케이션된 콘텐츠에 광고가 포함되어 있지만 출판사의 일반 콘텐츠와 일치하지 않을 수 있는 경우, 이 객체가 유용할 수 있다. 신디케이션 방식 때문에, 콘텐츠가 실행 중인 페이지에 대해 익스체인지가 알고 있을 수도 있고 아닐 수도 있다. 예를 들어, 알려지지 않은 웹 사이트나 디바이스의 iframe에 임베드된 동영상 광고가 있을 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 출판사가 제공한 콘텐츠를 고유하게 식별하는 ID. |
| `episode` | integer | 에피소드 번호. |
| `title` | string | 콘텐츠 제목.<br>*동영상 예제:* “Search Committee” (TV), “A New Hope” (영화), “Endgame” (웹용 제작).<br>*비동영상 예제:* “Why an Antarctic Glacier Is Melting So Quickly” (Time 잡지 기사). |
| `series` | string | 콘텐츠 시리즈.<br>*동영상 예제:* “The Office” (TV), “Star Wars” (영화), “Arby ‘N’ The Chief” (웹용 제작).<br>*비동영상 예제:* “Ecocentric” (Time Magazine 블로그). |
| `season` | string | 콘텐츠 시즌 (예: “Season 3”). |
| `artist` | string | 콘텐츠에 크레딧된 아티스트. |
| `genre` | string | 콘텐츠를 가장 잘 설명하는 장르 (예: 록, 팝 등). |
| `gtax` | int; 기본값 9 | 사용 중인 분류 체계. 값은 AdCOM 1.0의 [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참고.<br><br>gtax 필드가 제공되지 않으면 Content Category Taxonomy 3.1이 기본값으로 간주. |
| `genres` | string 배열 | gtax 필드에 정의된 분류 체계에 나열된 콘텐츠 장르의 고유 ID(s). gtax 필드가 제공되지 않으면 [Content Category Taxonomy 3.1](https://github.com/InteractiveAdvertisingBureau/Taxonomies/blob/main/Content%20Taxonomies/Content%20Taxonomy%203.1.tsv)의 [CTV Genre Mapping](https://github.com/InteractiveAdvertisingBureau/Taxonomies/blob/main/Taxonomy%20Mappings/CTV%20Genre%20Mapping.tsv)에 나열된 행의 하위 집합이 기본값으로 간주.<br><br>자세한 내용은 [Implementation Guidance의 7.13절](implementation.md#genre)을 참고. |
| `album` | string | 콘텐츠가 속한 앨범; 주로 오디오용. |
| `isrc` | string | ISO-3901에 따른 국제 표준 녹음 코드. |
| `producer` | object | 콘텐츠 `Producer`에 대한 세부 정보 (3.2.17절 참고). |
| `url` | string | 콘텐츠의 URL, 구매측 컨텍스트화 또는 검토용. |
| `cattax` | integer; 기본값 1 | 사용 중인 분류 체계. 값은 AdCOM 1.0의 [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참고. |
| `cat` | string 배열 | 콘텐츠를 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의. cattax 필드가 제공되지 않으면 Content Category Taxonomy 1.0이 기본값으로 간주. |
| `prodq` | integer | 제작 품질. AdCOM 1.0의 [List: Production Qualities](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--production-qualities-)를 참고. |
| `context` | integer | 콘텐츠 유형 (게임, 동영상, 텍스트 등). AdCOM 1.0의 [List: Content Contexts](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--content-contexts-)를 참고. |
| `contentrating` | string | 콘텐츠 등급 (예: MPAA). |
| `userrating` | string | 콘텐츠의 사용자 등급 (예: 별점, 좋아요 수 등). |
| `qagmediarating` | integer | IQG 가이드라인에 따른 미디어 등급. AdCOM 1.0의 [List: Media Ratings](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--media-ratings-)를 참고. |
| `keywords` | string | 콘텐츠를 설명하는 키워드의 쉼표로 구분된 목록. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있음. |
| `kwarray` | string 배열 | 사이트에 대한 키워드 배열. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있음. |
| `livestream` | integer | 0 = 라이브 아님, 1 = 콘텐츠가 라이브 (예: 스트리밍, 라이브 블로그). |
| `sourcerelationship` | integer | 0 = 간접적, 1 = 직접적. |
| `len` | integer | 콘텐츠 길이 (초 단위); 동영상 또는 오디오에 적합. |
| `language` | string | ISO-639-1-alpha-2를 사용한 콘텐츠 언어. `language` 또는 `langb` 중 하나만 존재할 수 있음. |
| `langb` | string | IETF BCP 47을 사용한 콘텐츠 언어. `language` 또는 `langb` 중 하나만 존재할 수 있음. |
| `embeddable` | integer | 콘텐츠가 임베드 가능한지 여부 (예: 임베드 가능한 동영상 플레이어), 0 = 아니오, 1 = 예. |
| `data` | object 배열 | 추가 콘텐츠 데이터. 각 `Data` 객체 (3.2.21절 참고)는 다른 데이터 소스를 나타냄. |
| `network` | object | 콘텐츠가 있는 네트워크에 대한 세부 정보 (3.2.23절 참고). |
| `channel` | object | 콘텐츠가 있는 채널에 대한 세부 정보 (3.2.24절 참고). |
| `ext` | object | OpenRTB의 익스체인지별 확장을 위한 자리 표시자. |


### 3.2.17 - 객체: Producer <a name="objectproducer"></a>

이 객체는 광고가 표시될 콘텐츠의 제작자를 정의한다. 콘텐츠가 여러 출판사를 통해 배포되는 경우, 즉 제작자와 출판사가 동일하지 않을 때 특히 유용하다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 콘텐츠 제작자 또는 원작자의 ID. 콘텐츠가 embed 태그를 사용해 사이트에 게시될 때 유용하다. |
| `name` | string | 콘텐츠 제작자 또는 원작자의 이름 (예: "Warner Bros"). |
| `cattax` | integer; 기본값 1 | 사용 중인 분류 체계. 값은 AdCOM 1.0 목록 [List: 카테고리 분류 체계](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참조한다. |
| `cat` | string 배열 | 콘텐츠 제작자를 설명하는 IAB Tech Lab 콘텐츠 카테고리 배열. 사용할 분류 체계는 cattax 필드에 의해 정의된다. cattax 필드가 제공되지 않으면 Content Category Taxonomy 1.0이 기본값으로 사용된다. |
| `domain` | string | 콘텐츠 제작자의 최상위 도메인 (예: "producer.com"). |
| `ext` | object | OpenRTB의 교환별 확장 기능을 위한 자리 표시자. |


### 3.2.18 - 객체: 디바이스 <a name="objectdevice"></a>

이 객체는 사용자가 상호작용하는 디바이스와 관련된 정보를 제공한다. 디바이스 정보에는 하드웨어, 플랫폼, 위치, 통신사 데이터 등이 포함된다. 디바이스는 모바일 핸드셋, 데스크톱 컴퓨터, 셋톱박스 또는 기타 디지털 기기를 의미할 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `geo` | 객체; 권장 | `Geo` 객체로 정의된 사용자의 현재 위치로 추정되는 디바이스의 위치 (3.2.19절 참조). |
| `dnt` | 정수; 권장 | 브라우저 헤더에 설정된 표준 "Do Not Track" 플래그. 0 = 추적 제한 없음, 1 = 추적 금지. |
| `lmt` | 정수; 권장 | 상업적으로 승인된 "Limit Ad Tracking" 시그널 (예: iOS, Android). 0 = 추적 제한 없음, 1 = 상업적 가이드라인에 따라 추적 제한. |
| `ua` | 문자열 | 브라우저의 사용자 에이전트 문자열. 이 필드는 브라우저의 원시 사용자 에이전트 문자열을 나타낸다. 하위 호환성을 위해, 사용자 에이전트 문자열이 사용자 디바이스에서 제공될 경우, `ua` 필드를 항상 채우는 것이 권장된다. User-Agent Client-Hints와 같은 대체 표현이 있더라도, `sua` 필드를 채우는 데 사용할 수 있다. 이 필드에서는 추론되거나 근사된 사용자 에이전트를 기대하지 않는다.<br>클라이언트가 User-Agent Client Hints를 지원하고 `sua` 필드가 있는 경우, 입찰자는 디바이스 타입, 브라우저 타입 및 버전, 그리고 사용자 에이전트 정보에 의존하는 기타 목적을 위해 `sua` 필드를 신뢰하고 `ua` 필드는 무시하는 것이 권장된다. 이는 `ua`가 고정되거나 축소된 사용자 에이전트 문자열을 포함할 수 있기 때문이다. |
| `sua` | 객체 | `UserAgent` 객체로 정의된 구조화된 사용자 에이전트 정보 (3.2.29절 참조). 입찰 요청에 `ua`와 `sua`가 모두 존재하는 경우, `sua`가 디바이스 속성을 더 정확히 나타내는 것으로 간주해야 한다. 이는 `ua`가 고정되거나 축소된 사용자 에이전트 문자열을 포함할 수 있기 때문이다. |
| `ip` | 문자열 | 디바이스와 가장 가까운 IPv4 주소. |
| `ipv6` | 문자열 | 디바이스와 가장 가까운 IPv6 주소. |
| `devicetype` | 정수 | 디바이스의 일반적인 타입. AdCOM 1.0의 [List: Device Types](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--device-types-) 참조. |
| `make` | 문자열 | 디바이스 제조사 (예: "Apple"). |
| `model` | 문자열 | 디바이스 모델 (예: "iPhone"). |
| `os` | 문자열 | 디바이스 운영체제 (예: "iOS"). |
| `osv` | 문자열 | 디바이스 운영체제 버전 (예: "3.1.2"). |
| `hwv` | 문자열 | 디바이스의 하드웨어 버전 (예: iPhone 5S의 경우 "5S"). |
| `h` | 정수 | 화면의 물리적 높이 (픽셀 단위). |
| `w` | 정수 | 화면의 물리적 너비 (픽셀 단위). |
| `ppi` | 정수 | 화면 크기 (인치당 픽셀 수). |
| `pxratio` | 실수 | 물리적 픽셀과 디바이스 독립적 픽셀(DIPS)의 비율. |
| `js` | 정수 | JavaScript 지원 여부. 0 = 지원 안 함, 1 = 지원 함. |
| `geofetch` | 정수 | 배너 내에서 실행되는 JavaScript 코드에 위치 정보 API가 사용 가능한지 여부. 0 = 사용 불가, 1 = 사용 가능. |
| `flashver` | 문자열 | 브라우저가 지원하는 Flash 버전. |
| `language` | 문자열 | ISO-639-1-alpha-2 형식의 브라우저 언어. `language` 또는 `langb` 중 하나만 존재해야 한다. |
| `langb` | 문자열 | IETF BCP 47 형식의 브라우저 언어. `language` 또는 `langb` 중 하나만 존재해야 한다. |
| `carrier` | 문자열 | 통신사 또는 ISP (예: "VERIZON"). 입찰자에게 미리 공개된 교환 문자열 이름을 사용해야 한다. |
| `mccmnc` | 문자열 | MCC-MNC 코드로 연결된 모바일 통신사 (예: 미국의 Verizon Wireless CDMA는 "310-005"). 자세한 예시는 https://en.wikipedia.org/wiki/Mobile_country_code 참조. MCC와 MNC 부분 사이의 대시는 파싱 모호성을 제거하기 위해 필수적이다. MCC-MNC 값은 디바이스에 설치된 SIM을 나타내며, 디바이스가 로밍 중일 때도 변경되지 않는다. 로밍은 MCC-MNC, 위치, IP 및 기타 데이터 시그널의 조합으로 추론할 수 있다. |
| `connectiontype` | 정수 | 네트워크 연결 타입. AdCOM 1.0의 [List: Connection Types](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--connection-types-) 참조. |
| `ifa` | 문자열 | 광고주가 명확하게 사용할 수 있도록 승인된 ID (즉, 해시되지 않음)<br>구매자와 판매자 간에 사전 협의가 이루어지지 않은 경우, 이 필드의 값은 디바이스 운영체제가 제공하는 광고 API 호출에서 파생된 ID여야 한다. |
| `didsha1` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `didmd5` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `dpidsha1` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `dpidmd5` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `macsha1` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `macmd5` | 문자열; 사용 중단 | OpenRTB 2.6부터 사용 중단. |
| `ext` | 객체 | OpenRTB의 교환별 확장을 위한 자리 표시자. |


### 3.2.19 - 객체: Geo <a name="objectgeo"></a>

이 객체는 지리적 위치를 지정하는 다양한 메서드를 포함한다. `Device` 객체에 속할 경우, 해당 기기의 위치를 나타내며 사용자의 현재 위치로 해석할 수도 있다. `User` 객체에 속할 경우, 사용자의 기반 위치(즉, 현재 위치가 아닐 수도 있음)를 나타낸다.

`lat`/`lon` 속성은 `type` 속성에 표시된 정확도에 맞는 경우에만 전달해야 한다. 예를 들어, 우편번호와 같은 지리적 영역의 중심점은 전달하지 않는다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `lat` | float | 위도. -90.0에서 +90.0 사이의 값이며, 음수는 남쪽을 나타낸다. |
| `lon` | float | 경도. -180.0에서 +180.0 사이의 값이며, 음수는 서쪽을 나타낸다. |
| `type` | integer | 위치 데이터의 출처. `lat`/`lon`을 전달할 때 권장된다. AdCOM 1.0의 [리스트: 위치 타입](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--location-types-)을 참조한다. |
| `accuracy` | integer | 미터 단위의 예상 위치 정확도. `lat`/`lon`이 지정되고 기기의 위치 서비스에서 파생된 경우(즉, type = 1) 권장된다. 이 값은 기기에서 보고된 정확도이다. 정확한 해석을 위해 OS별 문서(예: Android, iOS)를 참조한다. |
| `lastfix` | integer | 이 지리적 위치가 확정된 이후의 시간(초 단위). 기기가 여러 번의 요청에 걸쳐 위치 데이터를 캐시할 수 있음에 유의한다. 이상적으로는 이 값은 실제 위치가 확정된 시간을 기준으로 해야 한다. |
| `ipservice` | integer | IP 주소를 통해 지리적 위치를 결정하는 데 사용된 서비스 또는 프로바이더(즉, type = 2). AdCOM 1.0의 [리스트: IP 위치 서비스](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--ip-location-services-)를 참조한다. |
| `country` | string | ISO-3166-1-alpha-3 형식의 국가 코드. |
| `region` | string | ISO-3166-2 형식의 지역 코드. 미국의 경우 2글자 주 코드. |
| `regionfips104` | string | FIPS 10-4 표기법을 사용한 국가의 지역. OpenRTB는 이 속성을 지원하지만, NIST는 2008년에 이를 철회했다. |
| `metro` | string | Google metro 코드. Nielsen DMAs와 유사하지만 정확히 같지는 않다. 코드 링크는 부록 A를 참조한다. |
| `city` | string | United Nations Code for Trade & Transport Locations를 사용한 도시. 코드 링크는 부록 A를 참조한다. |
| `zip` | string | 우편번호 또는 ZIP 코드. |
| `utcoffset` | integer | UTC로부터 +/- 분 단위의 현지 시간. |
| `ext` | object | OpenRTB의 교환별 확장을 위한 플레이스홀더. |


### 3.2.20 - Object: User <a name="objectuser"></a>

이 객체는 디바이스를 사용하는 인간 사용자(예: 광고의 대상)에 대해 알려진 정보나 추론된 정보를 포함한다. 사용자 `id`는 교환 아티팩트이며, 회전 또는 기타 개인정보 보호 정책의 영향을 받을 수 있다. 그러나 이 사용자 ID가 존재할 경우, 광고 노출 빈도 제한(frequency capping) 및 리타겟팅의 기준으로 사용할 수 있을 만큼 충분히 안정적이어야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 사용자에 대한 교환별 ID.<br>구매자와 판매자 간 사전 협의가 없는 한, 이 필드의 값은 ID 동기화에서 파생된 것으로 예상된다. (자세한 내용은 [부록: 쿠키 기반 ID 동기화](#appendixc) 참조) |
| `buyeruid` | string | 교환에서 구매자에게 매핑된 사용자에 대한 구매자별 ID.<br>구매자와 판매자 간 사전 협의가 없는 한, 이 필드의 값은 ID 동기화에서 파생된 것으로 예상된다. (자세한 내용은 [부록: 쿠키 기반 ID 동기화](#appendixc) 참조) |
| `yob` | integer; DEPRECATED | OpenRTB 2.6부터 더 이상 사용되지 않음. |
| `gender` | string; DEPRECATED | OpenRTB 2.6부터 더 이상 사용되지 않음. |
| `keywords` | string | 사용자의 키워드, 관심사, 의도 등을 쉼표로 구분한 목록. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `kwarray` | string array | 사용자에 대한 키워드 배열. `keywords` 또는 `kwarray` 중 하나만 존재할 수 있다. |
| `customdata` | string | 교환의 쿠키에 설정된 입찰자 데이터를 전달하기 위한 선택적 기능. 문자열은 base85 쿠키 안전 문자여야 하며, 모든 형식이 가능하다. "이스케이프"된 따옴표를 포함하려면 적절한 JSON 인코딩을 사용해야 한다. |
| `geo` | object | `Geo` 객체(섹션 3.2.19)로 정의된 사용자의 거주지 위치. 현재 위치와는 다를 수 있다. |
| `data` | object array | 추가 사용자 데이터. 각 `Data` 객체(섹션 3.2.21)는 다른 데이터 소스를 나타낸다. |
| `consent` | string | GDPR 규정이 적용될 때, 이 속성은 Transparency and Consent Framework의 [Consent String](https://github.com/InteractiveAdvertisingBureau/GDPR-Transparency-and-Consent-Framework/blob/master/TCFv2/IAB%20Tech%20Lab%20-%20Consent%20string%20and%20vendor%20list%20formats%20v2.md) 데이터 구조를 포함한다. |
| `eids` | object array | 여러 타사 ID 제공자를 지원하기 위한 표준 프로토콜에 대한 세부 정보(섹션 3.2.27). |
| `ext` | object | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.21 - 오브젝트: 데이터 <a name="objectdata"></a>

데이터와 세그먼트 오브젝트는 관련 오브젝트(예: 사용자, 콘텐츠)에 대한 추가 정보를 지정할 수 있게 해준다. 이 데이터는 교환 자체에서 제공되거나 `id` 필드에 지정된 제3자로부터 제공될 수 있다. 입찰 요청은 여러 프로바이더의 데이터 오브젝트를 혼합할 수 있다. 사용 중인 특정 데이터 프로바이더는 교환에서 입찰자에게 사전에 공개해야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 데이터 프로바이더의 교환별 고유 ID. |
| `name` | string | 데이터 프로바이더의 교환별 이름. |
| `cids` | string array | 확장 콘텐츠 ID 배열. `data` 오브젝트의 `name` 필드에 지정된 ID 소스에서 제공된 비디오 또는 오디오 콘텐츠의 하나 이상의 식별자를 나타낸다. |
| `segment` | object array | 실제 데이터 값을 포함하는 `Segment` (3.2.22절) 오브젝트 배열. |
| `ext` | object | OpenRTB에 대한 교환별 확장을 위한 자리 표시자. |


### 3.2.22 - 오브젝트: 세그먼트 <a name="objectsegment"></a>

세그먼트 오브젝트는 특정 데이터 단위를 전달하는 키-값 쌍이다. 상위 `Data` 오브젝트는 주어진 데이터 프로바이더로부터 이러한 값들의 집합이다. 구체적인 세그먼트 이름과 값 옵션은 교환소가 입찰자들에게 미리 공개해야 한다.


| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 데이터 프로바이더에 특정한 데이터 세그먼트의 ID. |
| `name` | string | 데이터 프로바이더에 특정한 데이터 세그먼트의 이름. |
| `value` | string | 데이터 세그먼트 값의 문자열 표현. |
| `ext` | object | OpenRTB의 교환소별 확장을 위한 공간. |


### 3.2.23 - 객체: 네트워크 <a name="objectnetwork"></a>

이 객체는 광고가 표시될 네트워크를 설명한다. 네트워크는 `채널` 객체의 상위 엔티티로 정의되며, 채널을 조직화하는 데 사용된다. 예를 들어, 콘텐츠 채널 컬렉션을 소유하거나 라이선스를 보유한 회사(바이어컴, 디스커버리, CBS, 워너미디어, 터너 등)나 콘텐츠를 제작하고 자체 배포하는 스튜디오가 이에 해당한다. 이름은 사람이 읽을 수 있는 필드이며, 도메인과 ID는 보고 및 타겟팅 목적으로 사용된다. 더 많은 예제는 7.6절을 참고한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 게시자가 할당한 고유 식별자. 모든 공급 소스에서 고유하지 않을 수 있다. |
| `name` | string | 콘텐츠가 속한 네트워크(예: "ABC"와 같은 TV 네트워크) |
| `domain` | string | 네트워크의 주요 도메인(예: ABC 네트워크의 경우 "abc.com"). DSP 타겟팅 정규화를 위해 최상위 개인 도메인(PSL+1)을 포함하는 것이 권장된다. |
| `ext` | object | OpenRTB의 교환별 확장을 위한 플레이스홀더. |


### 3.2.24 - 객체: 채널 <a name="objectchannel"></a>

이 객체는 광고가 표시될 채널을 설명한다. 채널은 브랜드명 내에서 콘텐츠 라이브러리나 스트림을 관리하는 주체로 정의된다. 예를 들어, 일반 TV와 스트리밍 TV에서 선택 가능한 특정 '채널'(MTV, HGTV, CNN, BBC One 등)이나 오디오 콘텐츠의 특정 스트림(일반적으로 '스테이션'이라고 함)이 있다. `name`은 사람이 읽을 수 있는 필드이며, `domain`과 `id`는 보고 및 타겟팅 목적으로 사용할 수 있다. 더 많은 예제는 7.6절을 참고한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 게시자가 할당한 고유 식별자. 모든 공급 소스에서 고유하지 않을 수 있다. |
| `name` | string | 콘텐츠가 표시되는 채널(예: "WABC-TV"와 같은 TV 채널) |
| `domain` | string | 채널의 기본 도메인(예: 지역 채널 WABC-TV의 경우 "abc7ny.com"). DSP 타겟팅 정규화를 위해 최상위 개인 도메인(PSL+1)을 포함하는 것이 권장된다. |
| `ext` | object | OpenRTB의 교환별 확장을 위한 자리 표시자. |


### 3.2.25 - 객체: SupplyChain <a name="objectsupplychain"></a>

이 객체는 재고 거래에 참여하는 특정 개체를 나타내는 노드들로 구성된다. 처음부터 끝까지 이어지는 전체 노드 체인은 재고에 대한 직접적인 지불 흐름에 관여하는 모든 개체를 나타낸다. 자세한 구현 예제는 다음 링크에서 확인할 수 있다: https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/supplychainobject.md

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `complete` | 정수; 필수 | 체인이 사이트, 앱 또는 기타 재고 매체의 소유자로 거슬러 올라가는 거래에 관여하는 모든 노드를 포함하는지 여부를 나타내는 플래그. 0 = 아니오, 1 = 예. |
| `nodes` | 객체 배열; 필수 | 체인 순서대로 정렬된 `SupplyChainNode` 객체 배열. 완전한 공급망 체인에서 첫 번째 노드는 거래에 관여하는 초기 광고 시스템과 판매자 ID를 나타내며, 이는 사이트, 앱 또는 기타 매체의 소유자를 의미한다. 불완전한 공급망 체인에서는 첫 번째로 알려진 노드를 나타낸다. 마지막 노드는 이 입찰 요청을 보내는 개체를 나타낸다. |
| `ver` | 문자열; 필수 | 사용 중인 공급망 사양의 버전. "major.minor" 형식으로 표시한다. 예를 들어, 사양 버전 1.0의 경우 문자열 "1.0"을 사용한다. |
| `ext` | 객체 | OpenRTB에 대한 거래소별 확장을 위한 자리 표시자. |


### 3.2.26 - 객체: SupplyChainNode <a name="objectsupplychainnode"></a>

이 객체는 `SupplyChain` 객체와 연결되며, 노드 배열로 구성된다. 이 노드들은 입찰 요청의 공급망에 참여하는 엔티티의 정체성을 정의한다. 자세한 구현 예제는 다음 링크에서 확인할 수 있다: https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/supplychainobject.md. `SupplyChainNode` 객체는 다음과 같은 속성을 포함한다:

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `asi` | string; 필수 | 입찰자가 연결하는 SSP, Exchange, Header Wrapper 등의 시스템의 정식 도메인 이름. 이는 시스템의 운영 도메인이 될 수 있으며, 상위 회사 도메인과 다를 경우 WHOIS 및 역방향 IP 조회를 통해 대리 시스템의 명확한 소유권을 확인하는 데 사용된다. ads.txt 파일이 존재하는 경우, 해당 파일에서 판매자를 식별하는 데 사용된 값과 동일해야 한다. |
| `sid` | string; 필수 | 광고 시스템 내 판매자 또는 재판매자 계정과 연결된 식별자. 이 값은 SSP/Exchange에서 지정한 필드의 트랜잭션(예: OpenRTB 입찰 요청)에서 사용된 값과 동일해야 한다. 일반적으로 OpenRTB에서는 `publisher.id`로, OpenDirect에서는 출판사의 조직 ID로 사용된다. 길이는 64자로 제한된다. |
| `rid` | string | 이 판매자가 발행한 OpenRTB 요청의 RequestId. |
| `name` | string | 주어진 `seller_ID` 아래에서 거래된 인벤토리에 대해 지불을 받는 회사(법인)의 이름. 이 값은 선택 사항이며, 광고 시스템의 sellers.json 파일에 존재하는 경우 포함하지 않아야 한다. |
| `domain` | string | 이 노드가 나타내는 엔티티의 비즈니스 도메인 이름. 이 값은 선택 사항이며, 광고 시스템의 sellers.json 파일에 존재하는 경우 포함하지 않아야 한다. |
| `hp` | integer | 이 노드가 인벤토리에 대한 지불 흐름에 참여하는지 여부를 나타낸다. 1로 설정된 경우, `asi` 필드의 광고 시스템이 `sid` 필드의 판매자에게 지불하며, 이 판매자는 체인 내 이전 노드에게 지불할 책임이 있다. 0으로 설정된 경우, 이 노드는 인벤토리에 대한 지불 흐름에 참여하지 않는다. `SupplyChain` 버전 1.0에서는 이 속성은 항상 1이어야 한다. 구현자는 하류 광고 시스템으로 전송되는 입찰 요청에서 `SupplyChain` 객체를 구성할 때 이 필드를 전파해야 한다. |
| `ext` | object | 이 객체에 대한 광고 시스템별 확장을 위한 자리 표시자. |


### 3.2.27 - 객체: EID <a name="objecteid"></a>

OpenRTB 명세에서 확장 식별자(EID) 지원은 구매자가 실시간 입찰에서 오디언스 데이터를 사용할 수 있게 한다. 이 객체는 단일 소스 또는 기술 제공자로부터 하나 이상의 UID를 포함할 수 있다. 거래소는 이 데이터 전송이 허용되는지 사업 계약을 확인해야 한다. 이 필드 사용에 대한 추가 설명은 [구현 가이드 7.12절](implementation.md#idmm)을 참고한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `inserter` | string | ID 배열 요소를 추가한 엔티티(퍼블리셔, 퍼블리셔 수익화 회사, SSP, 거래소, 헤더 래퍼 등)의 정식 도메인 이름. WHOIS 및 역방향 IP 조회를 통해 위임 시스템의 소유권을 명확히 하기 위해, 회사 도메인과 다른 경우 운영 시스템의 도메인을 사용할 수 있다.<br>ads.txt 파일이 존재하는 경우, 이 값은 ads.txt에서 판매자를 식별하는 데 사용된 값과 동일해야 한다.<br>광고 기술 중개자의 경우 ads.txt에 사용된 도메인이다. 퍼블리셔의 경우 `site` 또는 `app` 객체의 도메인과 일치해야 한다. |
| `source` | string | ID의 정식 도메인. |
| `matcher` | string | `mm`에 정의된 매치 방법을 제공하는 기술.<br>경우에 따라 이 값은 inserter와 동일할 수 있다.<br>값이 비어 있는 경우, `matcher`는 `source`와 동일한 것으로 간주한다.<br>`mm`이 0, 1, 또는 2일 때 생략할 수 있다. |
| `mm` | int | `matcher`가 사용한 매치 방법. AdCOM 1.0의 [목록: ID 매치 방법](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/main/AdCOM%20v1.0%20FINAL.md#list-id-match-methods-) 참고 |
| `uids` | 객체 배열 | 주어진 소스의 확장 ID `UID` 객체 배열. `확장 식별자 UIDs` 객체(3.2.28절) 참고 |
| `ext` | object | OpenRTB에 대한 거래소별 확장을 위한 자리 표시자. |


### 3.2.28 - 객체: UID <a name="objectuid"></a>

이 객체는 확장 식별자의 일부로 제공되는 단일 사용자 식별자를 포함한다. 데이터 전송 시, 사업 계약에서 이 데이터의 전송을 허용하는지 확인해야 한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string | 사용자의 식별자 |
| `atype` | integer | ID가 속한 사용자 에이전트의 타입. 많은 DSP(Demand-Side Platform)들이 앱 네이티브 ID와 브라우저 기반 ID를 구분하며, ID 해석을 위해 타입 값이 필요하기 때문에 이 값을 설정하는 것이 권장된다. 자세한 내용은 AdCOM 1.0의 [리스트: 에이전트 타입](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_agenttypes)을 참조 |
| `ext` | object | 벤더별 확장을 위한 공간 |


### 3.2.29 - 객체: UserAgent <a name="objectuseragent"></a>

구조화된 사용자 에이전트 정보로, 클라이언트가 [User-Agent Client Hints](https://wicg.github.io/ua-client-hints/)를 지원할 때 사용할 수 있다. 입찰 요청에 `device.ua`와 `device.sua`가 모두 존재하는 경우, `device.sua`를 더 정확한 장치 속성으로 간주해야 한다. 이는 `device.ua`가 브라우저에서 사용자 에이전트 문자열을 더 이상 지원하지 않아 동결되거나 축소된 문자열을 포함할 수 있기 때문이다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `browsers` | `BrandVersion` 객체 배열; 권장 | 각 `BrandVersion` 객체(3.2.30절 참조)는 브라우저나 유사한 소프트웨어 컴포넌트를 식별한다. 구현자는 Sec-CH-UA-Full-Version-List 헤더에서 파생된 브랜드와 버전을 전송해야 한다\*. |
| `platform` | `BrandVersion` 객체; 권장 | 사용자 에이전트의 실행 플랫폼/OS를 식별하는 `BrandVersion` 객체(3.2.30절 참조). 구현자는 Sec-CH-UA-Platform 헤더에서 파생된 브랜드와 Sec-CH-UA-Platform-Version 헤더에서 파생된 버전을 전송해야 한다\*. |
| `mobile` | 정수 | 에이전트가 콘텐츠의 "모바일" 버전을 선호하는 경우 1, 즉 작은 화면이나 터치 입력에 최적화된 버전을 선호한다. 에이전트가 "데스크톱" 또는 "전체" 콘텐츠를 선호하는 경우 0. 구현자는 이 값을 Sec-CH-UA-Mobile 헤더에서 파생시켜야 한다\*. |
| `architecture` | 문자열 | 장치의 주요 바이너리 아키텍처, 예: "x86" 또는 "arm". 구현자는 이 값을 Sec-CH-UA-Arch 헤더에서 가져와야 한다\*. |
| `bitness` | 문자열 | 장치의 비트 수, 예: 64비트 아키텍처의 경우 "64". 구현자는 이 값을 Sec-CH-UA-Bitness 헤더에서 가져와야 한다\*. |
| `model` | 문자열 | 장치 모델. 구현자는 이 값을 Sec-CH-UA-Model 헤더에서 가져와야 한다\*. |
| `source` | 정수; 기본값 0 | 이 객체를 생성하는 데 사용된 데이터의 출처, AdCOM 1.0의 [List: User-Agent Source](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--user-agent-source-) 참조 |
| `ext` | 객체 | 이 객체에 대한 벤더별 확장을 위한 자리 표시자. |

\* 또는 [NavigatorUAData 인터페이스](https://wicg.github.io/ua-client-hints/#navigatoruadata)의 동등한 JavaScript 접근자. 이 헤더나 접근자는 [User-Agent Client Hints](https://wicg.github.io/ua-client-hints/)를 지원하는 브라우저에서만 사용할 수 있다.


### 3.2.30 - 객체: BrandVersion <a name="objectbrandversion"></a>

[User-Agent Client Hints](https://wicg.github.io/ua-client-hints/)를 기반으로 추가적인 식별 정보를 제공하는 `BrandVersion` 객체는 디바이스의 브라우저나 유사한 소프트웨어 컴포넌트, 그리고 사용자 에이전트의 실행 플랫폼이나 운영체제를 식별하는 데 사용된다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `brand` | string; 필수 | 브랜드 식별자. 예를 들어 "Chrome"이나 "Windows"와 같은 값. 이 값은 User-Agent Client Hints 헤더에서 가져올 수 있으며, 사용자 에이전트 브랜드(Sec-CH-UA-Full-Version 헤더) 또는 플랫폼 브랜드(Sec-CH-UA-Platform 헤더)를 나타낸다. |
| `version` | string 배열 | 버전 구성 요소의 순서를 나타내며, 계층적으로 내림차순으로 정렬된다(major, minor, micro, …). |
| `ext` | 객체 | 이 객체에 대한 벤더별 확장을 위한 자리 표시자. |


### 3.2.31 - 객체: 수량 <a name="objectqty"></a>

프로그래밍 방식으로 노출되는 광고는 디지털 아웃오브홈(DOOH)과 CTV에서 '스팟'이라고 불리며, 노출은 이를 본 고유한 청중을 의미한다. 따라서 입찰 요청 시 총 노출 수를 나타내는 승수를 전달하는 표준 방법이 필요하다. 이 객체는 노출 승수를 포함하며, 승수 값의 출처를 설명한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `multiplier` | float; 필수 | 이 항목이 구매되면 발생한 것으로 간주되는 청구 가능 이벤트의 수량. 예를 들어, DOOH 기회가 14.2회 노출로 간주될 수 있다. OpenRTB 3.0의 qtyflt와 동일하다. |
| `sourcetype` | integer; 권장 | 수량 측정의 출처 타입, 예: 퍼블리셔. 자세한 목록은 https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list-multiplier-measurement-source-types- 참조. |
| `vendor` | string; sourcetype이 존재하고 타입이 1일 경우 필수 | 수량 측정을 제공하는 측정 벤더의 최상위 비즈니스 도메인 이름. |
| `ext` | object | 벤더별 확장을 위한 자리 표시자. |


### 3.2.32 - 객체: DOOH <a name="objectdooh"></a>

광고 지원 콘텐츠가 디지털 아웃오브홈(Digital Out-Of-Home) 스크린인 경우 이 객체를 포함해야 한다. DOOH 객체가 포함된 입찰 요청에는 site 또는 app 객체가 포함되어서는 안 된다. 최소한 id와/또는 venuetypeid를 제공하는 것이 유용하지만, 이는 엄격하게 요구되지는 않는다.

|속성         |타입               |설명                                                                                                                                                                                                                              |
|------------|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|id          |문자열; 권장       |배치 또는 배치의 논리적 그룹화를 위한 거래소 제공 ID                                                                                                                                                                  |
|name        |문자열             |DOOH 배치의 이름                                                                                                                                                                                                              |
|venuetype   |문자열, 배열       |아웃오브홈 장소의 유형. 사용할 분류 체계는 venuetax 필드에 의해 정의된다. venuetax 필드가 제공되지 않으면 OpenOOH Venue Taxonomy가 기본값으로 사용된다. https://github.com/openooh/venue-taxonomy/blob/main/specification-1.0.md|
|venuetypetax|정수; 기본값 1     |사용 중인 장소 분류 체계. 목록 참조: https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list-venue-taxonomies-                                                                                                                                                                                           |
|publisher   |객체             |배치의 게시자에 대한 세부 정보                                                                                                                                                                                            |
|domain      |문자열             |인벤토리 소유자의 도메인 (예: “mysite.foo.com”)                                                                                                                                                                         |
|keywords    |문자열             |DOOH 배치에 대한 키워드의 쉼표로 구분된 목록                                                                                                                                                                               |
|content     |객체             |DOOH 배치 내의 콘텐츠에 대한 세부 정보                                                                                                                                                                     |
|ext         |객체             |OpenRTB에 대한 거래소별 확장을 위한 플레이스홀더                                                                                                                                                                                 |


### 3.2.33 - 객체: Refresh <a name="objectrefresh"></a>

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `refsettings` | 객체 배열; 권장 | 광고 배치가 자동으로 새로고침되는 방식을 설명하는 `RefSettings` 객체 (3.2.34절 참조). |
| `count` | 정수; 권장 | 페이지가 마지막으로 로드된 이후 이 광고 슬롯이 새로고침된 횟수. |
| `ext` | 객체 | 이 객체에 대한 공급자별 확장을 위한 자리 표시자. |


### 3.2.34 - 객체: RefSettings <a name="objectrefsettings"></a>

광고 슬롯이 새로고침되는 빈도와 트리거에 대한 정보를 담은 객체.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `reftype` | 정수; 기본값 0; 권장 | 선언된 자동 새로고침의 타입. AdCOM 1.0의 [목록: 자동 새로고침 트리거](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/develop/AdCOM%20v1.0%20FINAL.md#list_autorefreshtriggers)를 참고. |
| `minint` | 정수; 권장 | 최소 새로고침 간격(초 단위). 모든 새로고침 타입에 적용되며, 이 시간 동안 광고 크리에이티브가 렌더링된 후 다음 크리에이티브로 새로고침된다. 이 필드가 없으면 노출 시간은 알 수 없다. 이 필드는 사용자가 페이지를 떠나는 것과 같은 외부 요인이나 가시성을 고려하지 않는다. |
| `ext` | 객체 | 벤더별 확장을 위한 자리 표시자. |


### 3.2.35 - Object: DurFloors <a name="objectdurfloors"></a>

이 객체는 판매자가 시간에 따라 가격이 변하는 비디오 및 오디오 광고 소재에 대한 최저 가격을 지정할 수 있게 한다. 예를 들어, 1-15초 구간은 최저 $5, 16-30초 구간은 최저 $10, 31초 이상 구간은 최저 $20로 설정할 수 있다. 정의된 범위에 대한 명시적인 제약은 없으며, 범위가 겹치지 않는다는 보장도 없다. 여러 범위가 적용될 수 있는 경우, 어떤 최저 가격이 적용될지는 구매자와 판매자가 협의해야 한다. 이 필드 사용에 대한 추가 정보는 [구현 지침 7.11절](implementation.md#floors)을 참조한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `mindur` | integer | 구간의 하한을 나타내는 정수. 이 값이 없으면 하한은 제한되지 않는다. mindur 또는 maxdur 중 하나는 필수지만, 둘 다 필요하지는 않다. |
| `maxdur` | integer | 구간의 상한을 나타내는 정수. 이 값이 없으면 상한은 제한되지 않는다. mindur 또는 maxdur 중 하나는 필수지만, 둘 다 필요하지는 않다. |
| `bidfloor` | float; 기본값 0 | 이 구간 내의 광고 소재로 입찰할 때 적용되는 최저 입찰가를 CPM 단위로 표시한다. 정의된 min/max 범위를 벗어나는 광고 소재의 경우, `Imp` 레벨의 `bidfloor`가 기본 최저 가격으로 사용된다. |
| `ext` | object | 벤더별 확장을 위한 플레이스홀더 객체. |


# 4. 입찰 응답 사양 <a name="bidresponsespec"></a>

RTB 응답은 입찰 요청 내 특정 노출(impressions)을 참조하는 입찰(bids)을 포함한다. 입찰은 기본적으로 구매 제안이다. 입찰 응답은 최상위 입찰 응답 객체와 특정 입찰을 나타내는 선택적 객체로 구성된다. 빈 HTTP 응답은 입찰하지 않음을 의미하며, 사실상 가장 대역폭 친화적인 시그널 형태이다. 하지만 "입찰하지 않는 이유(no-bid reason)"를 포함한 응답을 반환하는 것이 권장된다. 잘못된 형식의 응답이나 실제 입찰을 포함하지 않은 응답도 입찰하지 않음으로 해석된다.


## 4.1 - 객체 모델 <a name="4.2objectmodel"></a>

다음은 입찰 응답에 대한 객체 모델이다. 최상위 객체(즉, JSON에서 이름이 없는 외부 객체)는 모델에서 `BidResponse`로 표시된다. 입찰 응답은 여러 "시트"(실제 입찰자 상류의 구매 주체)로부터의 입찰을 포함할 수 있다. 실제로, 응답은 동일한 시트로부터 여러 입찰을 포함할 수 있으며, 일반적으로 서로 다른 캠페인에서 발생하지만 반드시 그럴 필요는 없다. 이는 대부분의 교환소가 퍼블리셔를 대신해 다양한 차단 목록을 적용하기 때문에 시트의 승리 가능성을 높일 수 있다.

![](https://github.com/InteractiveAdvertisingBureau/openrtb2.x/blob/864a56706b106eda94c03abefaa01dd43544864c/assets/Figure3.png)

*그림 4: 입찰 응답 객체 모델.*

그림을 참조하면, 실제 응답 객체는 왼쪽에 표시되어 있다. 특히 최상위 객체인 `BidResponse`와 시트별 `SeatBid` 컬렉션, 그리고 `Bid` 객체들이 포함된다. 다른 객체들은 입찰 요청과 관련된 객체들이다. 구체적으로, `BidResponse`는 추적을 위해 `BidRequest` ID를 포함하며, 요청이 여러 개의 광고 노출(`Imp`)을 포함할 수 있기 때문에 `Bid`는 구매 제안을 하는 `Imp`의 ID를 포함한다. 프라이빗 마켓플레이스 거래 조건 하에서 입찰이 이루어진 경우, `Bid`는 특정 `Deal` 객체의 ID도 포함한다.

모델 그림에는 확장 객체가 표시되지 않았다. 이는 정의되지 않은 구조의 객체로, 표준에 대한 입찰자별 확장을 전달하기 위해 다른 객체에 추가할 수 있다. 이러한 객체를 사용하는 입찰자는 자신의 확장 정보를 교환소에 공개할 책임이 있다.

다음 표는 입찰 응답 모델의 객체를 요약하고, 뒤따르는 하위 섹션에서의 상세 정의를 위한 인덱스 역할을 한다.

| 객체 | 섹션 | 설명 |
| --- | --- | --- |
| `BidResponse` | 4.2.1 | 최상위 객체. |
| `SeatBid` | 4.2.2 | 특정 시트를 대신해 입찰자가 제출한 입찰 컬렉션. |
| `Bid` | 4.2.3 | 특정 비즈니스 조건 하에서 특정 광고 노출을 구매하기 위한 제안. |


## 4.2 - 객체 명세 <a name="objectspecs"></a>

이어지는 하위 섹션에서는 입찰 응답 모델의 각 객체를 정의한다. 명세 전반에 걸쳐 다음과 같은 규칙을 적용한다:
- 특정 속성이 생략될 경우 프로토콜이 기술적으로 깨지는 경우, 해당 속성을 "필수"로 지정한다.
- 비즈니스적으로 중요한 속성은 "권장"으로 표시한다.
- 명시적으로 기본값이 정의되지 않은 속성은 생략 시 "알 수 없음"으로 해석한다.


### 4.2.1 - 객체: BidResponse <a name="objectbidresponse"></a>

이 객체는 최상위 입찰 응답 객체다(즉, 이름이 없는 외부 JSON 객체). `id` 속성은 로깅 목적으로 입찰 요청 ID를 반영한다. 마찬가지로 `bidid`는 입찰자에게 선택적인 응답 추적 ID다. 지정된 경우, 입찰자가 승리하면 후속 승리 알림 호출에 포함될 수 있다. 최소한 하나의 `seatbid` 객체가 필요하며, 이는 하나 이상의 광고 노출에 대한 입찰을 포함한다. 다른 속성들은 선택 사항이다.

"입찰 없음"을 표현하려면 HTTP 204와 함께 빈 응답을 반환하는 방법이 있다. 또는 입찰자가 거래소에 입찰하지 않은 이유를 전달하려는 경우, `nbr` 속성에 이유 코드를 포함한 `BidResponse` 객체를 반환한다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | 문자열; 필수 | 이 응답이 해당하는 입찰 요청의 ID. |
| `seatbid` | 객체 배열 | seatbid 객체 배열; 입찰을 하려면 1개 이상 필수. |
| `bidid` | 문자열 | 로깅/추적을 돕기 위해 입찰자가 생성한 응답 ID. |
| `cur` | 문자열; 기본값 "USD" | ISO-4217 알파 코드를 사용한 입찰 통화. |
| `customdata` | 문자열 | 입찰자가 거래소의 쿠키에 데이터를 설정할 수 있도록 하는 선택적 기능. 문자열은 base85 쿠키 안전 문자여야 하며, 어떤 형식이든 가능하다. "이스케이프"된 따옴표를 포함하려면 적절한 JSON 인코딩을 사용해야 한다. |
| `nbr` | 정수 | 입찰하지 않은 이유. OpenRTB 3.0의 [목록: 입찰 없음 이유 코드](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/OpenRTB%20v3.0%20FINAL.md#list--no-bid-reason-codes-)를 참조. |
| `ext` | 객체 | OpenRTB에 대한 입찰자별 확장을 위한 자리 표시자. |


### 4.2.2 - 객체: SeatBid <a name="objectseatbid"></a>

입찰 응답은 여러 개의 `SeatBid` 객체를 포함할 수 있다. 각 `SeatBid` 객체는 서로 다른 입찰자(seat)를 대표하며, 하나 이상의 개별 입찰을 포함한다. 요청에 여러 개의 광고 노출(impression)이 포함된 경우, `group` 속성을 사용해 해당 입찰자가 개별적으로 광고 노출을 수락할지(기본값), 아니면 모든 광고 노출을 그룹으로 수락할지 여부를 지정할 수 있다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `bid` | 객체 배열; 필수 | 광고 노출과 관련된 하나 이상의 `Bid` 객체 배열(4.2.3절 참조). 동일한 광고 노출에 대해 여러 입찰이 가능하다. |
| `seat` | 문자열 | 입찰을 대신하는 구매자(seat)의 ID(예: 광고주, 에이전시). |
| `group` | 정수; 기본값 0 | 0 = 광고 노출을 개별적으로 수락; 1 = 광고 노출을 그룹으로 수락 또는 거부. |
| `ext` | 객체 | OpenRTB에 대한 입찰자별 확장을 위한 자리 표시자. |


### 4.2.3 - 객체: 입찰 <a name="objectbid"></a>

`SeatBid` 객체는 하나 이상의 `Bid` 객체를 포함한다. 각 `Bid` 객체는 `impid` 속성을 통해 입찰 요청의 특정 노출(impression)과 연결되며, 해당 노출을 주어진 `price`로 구매하겠다는 제안을 나타낸다.

| 속성 | 타입 | 설명 |
| --- | --- | --- |
| `id` | string; 필수 | 입찰자(bidder)가 생성한 입찰 ID로, 로깅/추적에 사용된다. |
| `impid` | string; 필수 | 관련 입찰 요청의 `Imp` 객체 ID. |
| `price` | float; 필수 | CPM으로 표현된 입찰 가격. 실제 거래는 단일 노출 기준으로 이루어진다. 타입은 float이지만, 통화 처리 시 정수 연산을 권장한다(예: Java의 BigDecimal). |
| `nurl` | string | 입찰이 승리할 경우 교환소(exchange)가 호출하는 승리 알림 URL. 광고 마크업을 제공하는 선택적 수단이다. URL과 반환된 마크업 모두에 대체 매크로(Section 4.4)를 포함할 수 있다. |
| `burl` | string | 교환소의 비즈니스 정책(예: 전달, 노출 등)에 따라 승리한 입찰이 청구 가능 상태가 되었을 때 호출되는 청구 알림 URL. 대체 매크로(Section 4.4)를 포함할 수 있다. |
| `lurl` | string | 입찰이 실패했음을 알리는 실패 알림 URL. 대체 매크로(Section 4.4)를 포함할 수 있다. 교환소 정책에 따라 실패 알림을 지원하지 않거나, 승리한 청구 가격을 공개하지 않을 경우 ${AUCTION_PRICE} 매크로가 제거될 수 있다(즉, 빈 문자열로 대체됨). |
| `adm` | string | 입찰이 승리할 경우 광고 마크업을 전달하는 선택적 수단. 마크업이 둘 다 포함된 경우 승리 알림을 대체한다. 대체 매크로(Section 4.4)를 포함할 수 있다. |
| `adid` | string | 입찰이 승리할 경우 제공될 미리 로드된 광고의 ID. |
| `adomain` | string 배열 | 광고주의 도메인으로, 차단 목록 검사에 사용된다(예: “ford.com”). 크리에이티브 순환 시 배열로 제공될 수 있다. 교환소는 단일 도메인만 허용하도록 강제할 수 있다. |
| `bundle` | string | 앱 스토어(예: Apple App Store, Google Play)에서의 앱 스토어 ID. CTV 앱 스토어의 예상 문자열에 대한 자세한 내용은 [OTT/CTV Store Assigned App Identification Guidelines](https://iabtechlab.com/wp-content/uploads/2020/08/IAB-Tech-Lab-OTT-store-assigned-App-Identification-Guidelines-2020.pdf)를 참고한다. Google Play Store의 모바일 앱은 번들 또는 패키지 이름(예: com.foo.mygame)이어야 한다. Apple App Store의 앱은 숫자 ID여야 한다. |
| `iurl` | string | 캠페인 콘텐츠를 대표하는 이미지의 캐시 방지 없는 URL로, 광고 품질/안전 검사에 사용된다. |
| `cid` | string | 광고 품질 검사를 위한 캠페인 ID. `iurl`이 대표해야 할 크리에이티브 집합. |
| `crid` | string | 광고 품질 검사를 위한 크리에이티브 ID. |
| `tactic` | string | 입찰자가 입찰을 제출한 전략을 교환소에 보고하기 위해 사용하는 전략 ID. 전략 ID의 구체적인 사용법과 의미는 입찰자와 교환소 간에 사전에 협의해야 한다. |
| `cattax` | integer; 기본값 1 | 사용 중인 분류 체계. 값은 [List: Category Taxonomies](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_categorytaxonomies)를 참고한다. |
| `cat` | string 배열 | 크리에이티브의 IAB Tech Lab 콘텐츠 카테고리. 사용할 분류 체계는 `cattax` 필드로 정의된다. `cattax` 필드가 제공되지 않으면 Content Taxonomy 1.0이 가정된다. |
| `attr` | integer 배열 | 크리에이티브를 설명하는 속성 집합. AdCOM 1.0의 [List: Creative Attributes](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-attributes-)를 참고한다. |
| `apis` | integer 배열 | 마크업이 지원하는 API 목록. 명시적으로 나열되지 않은 API는 지원되지 않는 것으로 간주한다. AdCOM 1.0의 [List: API Frameworks](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/main/AdCOM%20v1.0%20FINAL.md#list_apiframeworks)를 참고한다. |
| `api` | integer; 사용 중단 | 참고: `apis`로 대체됨. |
| `protocol` | integer | 마크업의 비디오 응답 프로토콜(해당 시). AdCOM 1.0의 [List: Creative Subtypes - Audio/Video](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--creative-subtypes---audiovideo-)를 참고한다. |
| `qagmediarating` | integer | IQG 지침에 따른 크리에이티브 미디어 등급. AdCOM 1.0의 [List: Media Ratings](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list--media-ratings-)를 참고한다. |
| `language` | string | ISO-639-1-alpha-2를 사용한 크리에이티브의 언어. 언어적 콘텐츠가 없는 경우(예: 회사 로고만 있는 배너) 비표준 코드 “xx”를 사용할 수 있다. `language` 또는 `langb` 중 하나만 존재해야 한다. |
| `langb` | string | IETF BCP 47를 사용한 크리에이티브의 언어. `language` 또는 `langb` 중 하나만 존재해야 한다. |
| `dealid` | string | 이 입찰이 프라이빗 마켓플레이스 직접 거래와 관련된 경우, 입찰 요청의 `deal.id`를 참조한다. |
| `w` | integer | 크리에이티브의 너비(디바이스 독립적 픽셀, DIPS). |
| `h` | integer | 크리에이티브의 높이(디바이스 독립적 픽셀, DIPS). |
| `wratio` | integer | 크리에이티브의 상대적 너비(비율로 표현 시). Flex Ads에 필수. |
| `hratio` | integer | 크리에이티브의 상대적 높이(비율로 표현 시). Flex Ads에 필수. |
| `exp` | integer | 입찰자가 경매와 실제 노출 사이에 기다릴 수 있는 시간(초)에 대한 권고 사항. |
| `dur` | integer | 비디오 또는 오디오 크리에이티브의 지속 시간(초). |
| `mtype` | integer | 크리에이티브 마크업의 타입으로, `BidRequest.Imp`의 올바른 하위 객체와 연결될 수 있도록 한다.<br>값:<br>1 = 배너<br>2 = 비디오,<br>3 = 오디오<br>4 = 네이티브<br> |
| `slotinpod` | integer; 기본값 0 | 입찰 응답이 비디오 또는 오디오 광고 팟 내 특정 위치(예: 첫 번째 위치, 마지막 위치, 또는 임의 위치)에만 적합함을 나타낸다. 이 필드 사용에 대한 지침은 AdCOM 1.0의 [List: Slot Position in Pod](https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/master/AdCOM%20v1.0%20FINAL.md#list_slotpositioninpod)을 참고한다. |
| `ext` | object | OpenRTB에 대한 입찰자별 확장을 위한 자리 표시자. |

각 입찰에서 `nurl` 속성은 승리 알림 URL을 포함할 수 있다. 입찰자가 노출을 승리하면, 교환소는 이 알림 URL을 호출하여 입찰자에게 승리를 알리고, 청구 가격과 같은 정보를 대체 매크로(Section 4.5)를 사용해 전달한다. 승리 알림 반환 또는 `adm` 속성을 사용해 마크업을 제공할 수 있다(Section 4.4). 두 경우 모두 교환소는 마크업에서 발견된 모든 매크로에 대해 앞서 언급한 대체를 적용한다.

**베스트 프랙티스**: 승리 알림의 핵심 기능은 입찰자에게 경매 승리를 알리는 것이다. 이는 반드시 광고 전달, 크리에이티브 노출 가능성, 또는 청구 가능성을 의미하지는 않는다. 교환소는 입찰자에게 이벤트 트리거, 청구 정책, 그리고 승리 알림에 부여하는 기타 의미를 공개할 것을 강력히 권장한다. 또한 만료에 대한 추가 지침은 Section 7.2를 참고한다.

**베스트 프랙티스**: 청구 알림은 서버 측에서 실행되어야 하며, 교환소가 수익을 기록하는 지점에 최대한 가깝게 실행되어 교환소와 입찰자 간의 불일치를 최소화해야 한다.

**베스트 프랙티스**: VAST 비디오의 경우, IAB Tech Lab은 VAST 노출 이벤트를 노출이 청구 가능하다는 공식 신호로 규정한다. `burl` 속성이 지정된 경우, 교환소가 이 정책을 준수한다면 동시에 실행되어야 한다. 그러나 미묘한 기술적 문제로 인해 추가 불일치가 발생할 수 있으며, 입찰자는 이러한 시나리오를 피할 것을 주의해야 한다.

광고 품질 검사 또는 게시자 제한을 적용하기 위해 사용되는 몇 가지 다른 속성이 있다. 여기에는 `adomain`을 통한 광고주 도메인, 캠페인 콘텐츠를 대표하는 이미지의 캐시 방지 없는 URL인 `iurl`, 캠페인 ID와 캠페인 내 크리에이티브 ID인 `cid`와 `crid`, 크리에이티브 속성 배열인 `attr`, 그리고 크리에이티브의 크기를 나타내는 `h`와 `w`가 포함된다. 입찰이 프라이빗 마켓플레이스 거래와 관련된 경우, `dealid` 속성을 사용해 입찰 요청에서 해당 계약을 참조한다.


## 4.3 - 광고 서빙 옵션 <a name="adservingoptions"></a>

OpenRTB 스펙 내에서 RTB(Real-Time Bidding) 거래의 성공 여부는 마크업 전달에 달려 있다. 광고 노출 방식과 다른 광고 타입 제약에 따라, 이 마크업은 XHTML, HTML5, JavaScript가 포함된 XHTML 또는 HTML5, 비디오나 오디오용 VAST 문서, 네이티브 광고 단위 구조 등이 될 수 있다. 또한 향후 다른 포맷도 추가될 가능성이 있다.

OpenRTB 스펙은 매크로 치환(4.5절 참조)과 공급자 측으로의 전달 외에 광고 마크업에 대한 추가 처리를 요구하지 않는다. 그러나 입찰자에서 거래소로 마크업을 전송하는 데는 여러 표준 방법이 있다. 사용할 방법은 입찰자의 재량에 달려 있으며, 거래소의 지원 여부에 따라 결정된다. 입찰자와 거래소는 통합 과정에서 사용할 방법을 논의해야 한다.


### 4.3.1 - Win Notice를 통해 전달되는 마크업 <a name="markupservedonwin"></a>

이 방법에서는 광고 마크업이 Win Notice를 통해 교환 측으로 반환된다. 이 경우, Win Notice 호출의 응답 본문(즉, `bid.nurl` 속성을 호출한 결과)에는 광고 마크업만 포함되어야 하며, 응답 본문에 다른 구조화된 데이터가 있어서는 안 된다. 이 방법을 사용할 때는 `bid.adm` 속성을 생략해야 한다.


### 4.3.2 - 입찰에 포함된 마크업 <a name="markupservedinbid"></a>

이 방법에서는 광고 마크업이 입찰 자체에 직접 포함되어 반환된다. 이는 `bid.adm` 속성을 통해 구현된다. 만약 `adm` 속성과 낙찰 알림 모두 데이터를 반환할 경우, `adm`의 내용이 우선적으로 적용된다.


### 4.3.3 - 광고 제공 방식 비교 <a name="comparisonofapproaches"></a>

각 광고 제공 방식은 광고 교환 플랫폼이나 입찰자에게 다양한 장점을 제공한다. 이러한 장점은 상황에 따라 중요도가 달라질 수 있다.

**낙찰 통보 시 광고 제공**

- *대역폭 비용 절감*: 낙찰 시에만 광고 마크업을 제공하면 대역폭 사용량을 크게 줄일 수 있다. 특히 높은 볼륨에서 또는 입찰 응답 시 여러 입찰을 보낼 때 이러한 비용이 크게 발생할 수 있다.
- *추가적인 입찰자 유연성*: 입찰자는 일반적으로 입찰 시 제공할 광고를 알고 있지만, 이 방식은 정산 가격이 결정된 후 추가적인 선택의 기회를 제공한다.

**입찰 시 광고 제공**

- *포기 위험 감소*: 포기는 입찰자가 낙찰했지만 광고 마크업 제공 실패로 인해 포기하는 시나리오를 의미한다. 이 방식은 추가적인 HTTP 실패(예: 낙찰 통보 호출) 위험을 줄인다.
- *잠재적인 동시성*: 광고 교환 플랫폼은 광고 마크업을 반환하고 낙찰 통보를 동시에 호출할 수 있어 사용자 경험을 개선할 수 있다.


## 4.4 - 치환 매크로 <a name="substitutionmacros"></a>

낙찰 알림 및 청구 알림 URL과 그 형식은 입찰자가 정의한다. 거래소가 입찰자에게 특정 정보(예: 청구 가격)를 전달하기 위해, 이러한 URL에 여러 치환 매크로를 삽입할 수 있다. 거래소는 낙찰 또는 청구 알림 URL을 호출하기 전에 지정된 URL에서 정의된 매크로를 검색하고 적절한 데이터로 대체한다.<br>
치환은 단순한 방식으로 이루어지며, 유효한 매크로가 발견되면 문법적 정확성 여부와 상관없이 해당 매크로를 대체한다. 또한, 소스 값이 선택적 매개변수이고 지정되지 않은 경우, 매크로는 단순히 제거된다(즉, 길이가 0인 문자열로 대체됨).

동일한 치환 매크로는 광고 마크업에도 배치할 수 있다. 거래소는 앞서 언급한 알림 URL과 동일한 데이터 치환을 수행한다. 이는 마크업이 낙찰 알림에서 반환되든, 입찰 응답의 `bid.adm` 속성으로 전달되든 상관없이 적용된다. 광고 마크업에서 매크로를 사용하는 예시로는, 입찰자가 장치 자체에서 낙찰 알림을 받기를 원하는 경우가 있다. 이를 위해 입찰자는 광고 마크업에 트래킹 픽셀을 포함시키고, 해당 URL에 사용 가능한 매크로를 추가할 수 있다.

| 매크로 | 설명 |
| --- | --- |
| `${AUCTION_ID}` | 입찰 요청의 ID; `BidRequest.id` 속성에서 가져옴. |
| `${AUCTION_BID_ID}` | 입찰의 ID; `BidResponse.bidid` 속성에서 가져옴. |
| `${AUCTION_IMP_ID}` | 방금 낙찰된 노출의 ID; `imp.id` 속성에서 가져옴. |
| `${AUCTION_SEAT_ID}` | 입찰이 이루어진 입찰자 좌석의 ID. |
| `${AUCTION_AD_ID}` | 입찰자가 제공하려는 광고 마크업의 ID; `bid.adid` 속성에서 가져옴. |
| `${AUCTION_PRICE}` | 입찰과 동일한 통화 및 단위로 청구된 가격. |
| `${AUCTION_CURRENCY}` | 입찰에 사용된 통화(명시적 또는 암묵적); 확인용. |
| `${AUCTION_MBR}` | 청구 가격 / 입찰 가격으로 정의된 시장 입찰 비율. |
| `${AUCTION_LOSS}` | 손실 이유 코드. OpenRTB 3.0의 [List: Loss Reason Codes](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/OpenRTB%20v3.0%20FINAL.md#list--loss-reason-codes-) 참조. |
| `${AUCTION_MIN_TO_WIN}` | 거래소 경매에서 승리하기 위한 최소 입찰가, 입찰과 동일한 통화 및 단위로 표시. |
| `${AUCTION_MULTIPLIER}` | 낙찰된 노출의 총 수량; 확인용. 이 값은 입찰 요청에서 전송된 승수 값보다 작거나 같아야 한다. 이 값은 0보다 큰 부동 소수점 값이며, 1보다 작을 수도 있다. 구매자가 승수 값을 예상하고 이해했는지 확인하는 데 사용해야 한다. |
| `${AUCTION_IMP_TS}` | 노출이 이행된 시간(예: 광고가 표시된 시간)을 Unix 형식(에포크 이후 밀리초)으로 표시. 이는 노출이 발생하자마자 알림을 실행할 수 없는 플랫폼에서 사용할 수 있다. 생략된 경우, 알림이 실행되기 몇 초 전에 노출이 발생한 것으로 간주한다. |

OpenRTB를 준수하는 거래소는 데이터가 사용 가능한 모든 매크로를 지원해야 하며, 낙찰 및 청구 알림을 위한 마크업과 URL 모두에서 치환을 지원해야 한다.

**최적의 방법**: 테스트 또는 광고 품질 목적으로 마크업을 렌더링할 때, 일부 매크로 값(예: 청구 가격)을 알 수 없는 경우가 있다. 이러한 경우, 매크로 값으로 "AUDIT"을 대체한다.

**최적의 방법**: 매크로 데이터의 인코딩은 추가 처리 오버헤드로 인해 절제해서 사용해야 한다. 거래소와 입찰자 간의 통신(예: 거래소에서 호출된 낙찰 알림)의 경우, 일반적으로 인코딩이 필요하지 않다.

치환 전에, 매크로 데이터 값은 보안 목적으로 다양한 난독화 또는 암호화 알고리즘을 사용해 인코딩할 수 있다. 이는 가격 정보가 거래소를 넘어 퍼블리셔를 통해 마크업의 트래킹 픽셀을 통해 장치 브라우저로 전달되는 사용 사례에서 특히 유용할 수 있다.

특정 매크로를 인코딩하려면 매크로 이름에 "`:X`" 접미사를 추가해야 한다. 여기서 X는 사용할 알고리즘을 나타내는 문자열이다. 알고리즘 선택은 이 사양에 의해 정의되지 않으며, 당사자 간에 상호 합의되어야 한다. 예를 들어, 가격 매크로를 Base64로 인코딩하고, 그 코드가 "`B64`"인 경우, 매크로는 다음과 같이 작성된다:

`${AUCTION PRICE:B64}`


### 4.4.1 - 매크로 ${AUCTION_MIN_TO_WIN}에 대한 설명 <a name="notesonmacro"></a>

위에서 언급한 "AUDIT" 값이 적용되지 않는 경우, 이 매크로는 다음과 같이 대체된다:

- 빈 문자열: 교환이 값을 제공하지 않기로 결정한 경우, 예를 들어:
  - 시트, 광고주 등에 대한 차단으로 인해 입찰이 경매에 허용되지 않은 경우
  - 손실 코드에 따라 가격이 손실의 결정적 요인이 아니었던 경우
  - 교환의 개인 정보 보호 정책에 따라, 원하는 최저가를 충족하지 못한 입찰자에게 가격 데이터를 공유하지 않거나, 교환이 출판사나 승리한 입찰자의 선택에 따라 다른 입찰자에게 가격 데이터를 공유하지 않는 경우

- 경매에서 다른 입찰자에게 패배한 경우, 승리 입찰과 동률을 이루기 위해 필요한 최소 가격
- 경매에서 승리한 경우, 다음으로 가까운 입찰과 동률을 이루기 위해 필요한 최소 가격 또는 입찰이 하나뿐인 경우 최저가

참고로, 해당 교환이 최종 결정권자가 아닐 수 있다. 교환은 두 개 이상의 입찰을 두 번째 경매로 전파할 수 있다. 이 경우에도 여전히 하나의 경매 입찰만이 "승리자"가 되며, 위와 같이 모든 입찰에 대해 매크로가 대체된다.

다음 예제에서는 최저가가 $0.85인 경매를 가정하고, 각 행이 경쟁 입찰이라고 가정한다. 또한 교환이 위의 이유로 매크로를 빈 문자열로 대체할 수 있음을 유의한다.

1차 가격 경매의 경우:<br>

| 입찰 가격 | ${AUCTION_PRICE} | ${AUCTION_MIN_TO_WIN} |
| --- | --- | --- |
| `$1.00` | $1.00 | $0.90 |
| `$0.90` | 빈 문자열 | $1.00 |
| `$0.80` | 빈 문자열 | $1.00 |
| `유효하지 않음` | 해당 없음 | 빈 문자열 |

2차 가격 경매의 경우 (설명을 위해 청산 가격이 두 번째로 높은 가격에 $0.01을 더한 값이라고 가정):<br>

| 입찰 가격 | ${AUCTION_PRICE} | ${AUCTION_MIN_TO_WIN} |
| --- | --- | --- |
| `$1.00` | $0.91 | $0.90 |
| `$0.90` | 빈 문자열 | $0.91 |
| `$0.80` | 빈 문자열 | $0.91 |
| `유효하지 않음` | 해당 없음 | 빈 문자열 |


# 5. 열거형 리스트 명세 <a name="enumeratedlistsspec"></a>

OpenRTB는 열거형을 정의하기 위해 Advertising Common Object Model([AdCOM](https://github.com/InteractiveAdvertisingBureau/AdCOM/) 1.0)을 사용한다. 이전 버전에서는 추가 열거형이 필요할 경우 문서 업데이트뿐만 아니라 버전 업데이트도 필요했다. AdCOM 1.0을 사용하면 새로운 OpenRTB 버전 없이도 열거형에 항목을 추가할 수 있다. 구현자는 새로운 표준이 나올 때마다 가능한 한 최신 열거형을 사용해야 한다.


# 6. 입찰 요청/응답 예제 <a name="bidrequestresponsesamples"></a>

## 6.1 - GitHub 저장소 <a name="githubrepo"></a>

공식 OpenRTB GitHub 저장소에는 검증된 예제 요청들이 포함되어 있다. 이 저장소는 구현자들에게 표준 예제로 간주해야 한다.
https://github.com/InteractiveAdvertisingBureau/openrtb


## 6.2 - 입찰 요청 <a name="6.4bidrequests"></a>

### 6.2.1 - 예제 1 – 간단한 배너 광고 <a name="simplebanner"></a>

다음은 배너 광고를 위한 기본적인 입찰 요청 예제이다. 이 예제에는 몇 가지 선택적 매개변수가 포함되어 있다.

```javascript
{
  "id": "80ce30c53c16e6ede735f123ef6e32361bfc7b22",
  "at": 1,
  "cur": [
    "USD"
  ],
  "imp": [
    {
      "id": "1",
      "bidfloor": 0.03,
      "banner": {
        "h": 250,
        "w": 300,
        "pos": 0
      }
    }
  ],
  "site": {
    "id": "102855",
    "cat": [
      "IAB3-1"
    ],
    "domain": "www.foobar.com",
    "page": "http://www.foobar.com/1234.html",
    "publisher": {
      "id": "8953",
      "name": "foobar.com",
      "cat": [
        "IAB3-1"
      ],
      "domain": "foobar.com"
    },
    "user": {
      "id": "55816b39711f9b5acf3b90e313ed29e51665623f"
    }
  }
}
```


### 6.2.2 - 예제 2 – 확장 가능한 크리에이티브 <a name="expandablecreative"></a>

이 예제는 첫 번째 예제를 기반으로 확장 가능한 크리에이티브를 지원하기 위한 파라미터를 추가하고, "Data Provider 1"로부터 사용자에 대한 데이터를 전달한다.

```javascript
{
  "id": "123456789316e6ede735f123ef6e32361bfc7b22",
  "at": 2,
  "cur": [
    "USD"
  ],
  "imp": [
    {
      "id": "1",
      "bidfloor": 0.03,
      "iframebuster": [
        "vendor1.com",
        "vendor2.com"
      ],
      "banner": {
        "h": 250,
        "w": 300,
        "pos": 0,
        "battr": [
          13
        ],
        "expdir": [
          2,
          4
        ]
      }
    }
  ],
  "site": {
    "id": "102855",
    "cat": [
      "IAB3-1"
    ],
    "domain": "www.foobar.com",
    "page": "http://www.foobar.com/1234.html",
    "publisher": {
      "id": "8953",
      "name": "foobar.com",
      "cat": [
        "IAB3-1"
      ],
      "domain": "foobar.com"
    }
  },
  "user": {
    "id": "55816b39711f9b5acf3b90e313ed29e51665623f",
    "buyeruid": "545678765467876567898765678987654",
    "data": [
      {
        "id": "12341318394918",
        "name": "auto intenders"
      },
      {
        "id": "1234131839491234",
        "name": "auto enthusiasts"
      },
      {
        "id": "23423424",
        "name": "data-provider1-age",
        "value": "30-40"
      }
    ]
  }
}
```


### 6.2.3 - 예제 3 – 모바일 <a name="example3mobile"></a>

이 예제는 모바일 기기를 나타내는 `device` 객체와 모바일 애플리케이션의 요청을 나타내는 `app` 객체를 사용한다.

```javascript
{
  "id": "IxexyLDIIk",
  "at": 2,
  "bcat": [
    "IAB25",
    "IAB7-39",
    "IAB8-18",
    "IAB8-5",
    "IAB9-9"
  ],
  "badv": [
    "apple.com",
    "go-text.me",
    "heywire.com"
  ],
  "imp": [
    {
      "id": "1",
      "bidfloor": 0.5,
      "instl": 0,
      "tagid": "agltb3B1Yi1pbmNyDQsSBFNpdGUY7fD0FAw",
      "banner": {
        "w": 728,
        "h": 90,
        "pos": 1,
        "btype": [
          4
        ],
        "battr": [
          14
        ],
        "api": [
          3
        ]
      }
    }
  ],
  "app": {
    "id": "agltb3B1Yi1pbmNyDAsSA0FwcBiJkfIUDA",
    "name": "Yahoo Weather",
    "cat": [
      "IAB15",
      "IAB15-10"
    ],
    "ver": "1.0.2",
    "bundle": "12345",
    "storeurl": "https://itunes.apple.com/id628677149",
    "publisher": {
      "id": "agltb3B1Yi1pbmNyDAsSA0FwcBiJkfTUCV",
      "name": "yahoo",
      "domain": "www.yahoo.com"
    }
  },
  "device": {
    "dnt": 0,
    "ua": "Mozilla/5.0 (iPhone; CPU iPhone OS 6_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3",
    "ifa": "AA000DFE74168477C70D291f574D344790E0BB11",
    "carrier": "VERIZON",
    "language": "en",
    "make": "Apple",
    "model": "iPhone",
    "os": "iOS",
    "osv": "6.1",
    "js": 1,
    "connectiontype": 3,
    "devicetype": 1
  },
  "user": {
    "id": "ffffffd5135596709273b3a1a07e466ea2bf4fff"
  }
}
```


### 6.2.4 예제 4 – 비디오 <a name="example4video"></a>

다음 예제는 두 개의 동반 광고 슬롯(1개는 확장 가능)을 포함한 비디오 광고 요청을 보여준다. 또한 비디오 콘텐츠 자체는 "content" 객체에 설명되어 있다. 예제의 특정 필드에 대한 몇 가지 설명은 다음과 같다:

- `battr`: 사용자 상호작용 및 경고 타입 광고(각각 값 "13"과 "14")는 비디오와 동반 광고 모두에서 명시적으로 차단된다.
- `pos`: 이 광고 기회가 "above the fold"(화면 상단에 노출되는 위치)임을 나타낸다.
- `companiontype`: 정적 또는 HTML 리소스만 허용됨을 나타낸다.

```javascript
{
  "id": "1234567893",
  "at": 2,
  "tmax": 120,
  "imp": [
    {
      "id": "1",
      "bidfloor": 0.03,
      "video": {
        "w": 640,
        "h": 480,
        "pos": 1,
        "startdelay": 0,
        "minduration": 5,
        "maxduration": 30,
        "maxextended": 30,
        "minbitrate": 300,
        "maxbitrate": 1500,
        "apis": [
          1,
          2
        ],
        "protocols": [
          2,
          3
        ],
        "mimes": [
          "video/x-flv",
          "video/mp4",
          "application/javascript"
        ],
        "linearity": 1,
        "boxingallowed": 1,
        "playbackmethod": [
          1,
          3
        ],
        "delivery": [
          2
        ],
        "battr": [
          13,
          14
        ],
        "companionad": [
          {
            "id": "1234567893-1",
            "w": 300,
            "h": 250,
            "pos": 1,
            "battr": [
              13,
              14
            ],
            "expdir": [
              2,
              4
            ]
          },
          {
            "id": "1234567893-2",
            "w": 728,
            "h": 90,
            "pos": 1,
            "battr": [
              13,
              14
            ]
          }
        ],
        "companiontype": [
          1,
          2
        ]
      }
    }
  ],
  "site": {
    "id": "1345135123",
    "name": "Site ABCD",
    "domain": "siteabcd.com",
    "cat": [
      "IAB2-1",
      "IAB2-2"
    ],
    "page": "http://siteabcd.com/page.htm",
    "ref": "http://referringsite.com/referringpage.htm",
    "privacypolicy": 1,
    "publisher": {
      "id": "pub12345",
      "name": "Publisher A"
    },
    "content": {
      "id": "1234567",
      "series": "All About Cars",
      "season": "2",
      "episode": 23,
      "title": "Car Show",
      "cat": [
        "IAB2-2"
      ],
      "keywords": "keyword-a,keyword-b,keyword-c"
    }
  },
  "device": {
    "ua": "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16",
    "os": "OS X",
    "js": 1
  },
  "user": {
    "id": "456789876567897654678987656789",
    "buyeruid": "545678765467876567898765678987654",
    "data": [
      {
        "id": "6",
        "name": "Data Provider 1",
        "segment": [
          {
            "id": "12341318394918",
            "name": "auto intenders"
          },
          {
            "id": "1234131839491234",
            "name": "auto enthusiasts"
          }
        ]
      }
    ]
  }
}
```


### 6.2.5 - 예제 5 – PMP와 직접 거래 <a name="pmpwdirectdeal"></a>

다음은 배너 광고를 위한 직접 거래(direct deal)가 포함된 입찰 요청의 기본 예제이다. 이 예제에는 몇 가지 선택적 매개변수가 포함되어 있다.

```javascript
{
  "id": "80ce30c53c16e6ede735f123ef6e32361bfc7b22",
  "at": 1,
  "cur": [
    "USD"
  ],
  "imp": [
    {
      "id": "1",
      "bidfloor": 0.03,
      "banner": {
        "h": 250,
        "w": 300,
        "pos": 0
      },
      "pmp": {
        "private_auction": 1,
        "deals": [
          {
            "id": "AB-Agency1-0001",
            "at": 1,
            "bidfloor": 2.5,
            "wseat": [
              "Agency1"
            ]
          },
          {
            "id": "XY-Agency2-0001",
            "at": 2,
            "bidfloor": 2,
            "wseat": [
              "Agency2"
            ]
          }
        ]
      }
    }
  ],
  "site": {
    "id": "102855",
    "domain": "www.foobar.com",
    "cat": [
      "IAB3-1"
    ],
    "page": "http://www.foobar.com/1234.html",
    "publisher": {
      "id": "8953",
      "name": "foobar.com",
      "cat": [
        "IAB3-1"
      ],
      "domain": "foobar.com"
    }
  },
  "device": {
    "ua": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.13 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2"
  },
  "user": {
    "id": "55816b39711f9b5acf3b90e313ed29e51665623f"
  }
}
```


### 6.2.6 - 예제 6 – 네이티브 광고 <a name="example6nativead"></a>

네이티브 광고 구현에 대한 자세한 내용과 예제는 OpenRTB 네이티브 광고 API 명세서를 참고하세요: https://iabtechlab.com/standards/openrtb-native/


## 6.3 - 입찰 응답 <a name="6.5bidresponses"></a>

### 6.3.1 - 예제 1 – 낙찰 통지 시 광고 제공 <a name="ex1adservedwin"></a>

다음은 낙찰 통지 시 광고가 제공되는 입찰 응답 예제이다. 이 노출에 대한 입찰가는 $9.43 CPM이다.

```javascript
{
  "id": "1234567890",
  "bidid": "abc1123",
  "cur": "USD",
  "seatbid": [
    {
      "seat": "512",
      "bid": [
        {
          "id": "1",
          "impid": "102",
          "price": 9.43,
          "nurl": "http://adserver.com/winnotice?impid=102",
          "iurl": "http://adserver.com/pathtosampleimage",
          "adomain": [
            "advertiserdomain.com"
          ],
          "cid": "campaign111",
          "crid": "creative112",
          "attr": [
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            12
          ]
        }
      ]
    }
  ]
}
```


### 6.3.2 - 예제 2 – VAST XML 문서를 인라인으로 반환 <a name="vastxml"></a>

다음은 VAST 문서를 인라인으로 반환하여 제공하는 입찰 응답 예제이다. 이 예제에서 특정 필드에 대한 몇 가지 주의사항은 다음과 같다:
- 이 노출에 대한 입찰가는 $3.00 CPM이다.
- `adm` 속성에는 승인 알림 URL과 인라인 VAST 문서가 모두 포함되어 있다. 이는 광고 마크업을 구성한다. 승인 알림은 여전히 호출되지만, 마크업을 반환하더라도 `adm` 속성의 내용이 우선적으로 사용된다.

```javascript
{
  "id": "123",
  "seatbid": [
    {
      "bid": [
        {
          "id": "12345",
          "impid": "2",
          "price": 3.00,
          "nurl": "http://example.com/winnoticeurl",
          "adm": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<VAST version=\"2.0\">\n<Ad id=\"12345\">\n<InLine>\n<AdSystem version=\"1.0\">SpotXchange</AdSystem>\n<AdTitle>\n<![CDATA[Sample VAST]]>\n</AdTitle>\n<Impression>http://sample.com</Impression>\n<Description>\n<![CDATA[A sample VAST feed]]>\n</Description>\n <Creatives>\n<Creative sequence=\"1\" id=\"1\">\n<Linear>\n<Duration>00:00:30</Duration>\n <TrackingEvents></TrackingEvents>\n<VideoClicks>\n<ClickThrough>\n<![CDATA[http://sample.com/openrtb test]]>\n</ClickThrough>\n</VideoClicks>\n<MediaFiles>\n <MediaFile delivery =\"progressive\" bitrate=\"256\" width=\"640\" height=\"480\" type=\"video/mp4\">\n<![CDATA[http://sample.com/video.mp4]]>\n</MediaFile>\n</MediaFiles>\n </Linear>\n</Creative>\n</Creatives>\n </InLine>\n</Ad>\n </VAST>"
        }
      ]
    }
  ]
}
```


### 6.3.3 - 예제 3 – Win Notice 시 직접 딜 광고 제공 <a name="directdealadonwin"></a>

아래는 Win Notice 시 제공되는 광고와 함께한 입찰 응답 예제이다. 이 노출에 대한 입찰은 직접 딜에 대해 $5.00 CPM으로 설정되었다.

```javascript
{
  "id": "1234567890",
  "bidid": "abc1123",
  "cur": "USD",
  "seatbid": [
    {
      "seat": "512",
      "bid": [
        {
          "id": "1",
          "impid": "102",
          "price": 5.00,
          "dealid": "ABC-1234-6789",
          "nurl": "http: //adserver.com/winnotice?impid=102",
          "adomain": [
            "advertiserdomain.com"
          ],
          "iurl": "http: //adserver.com/pathtosampleimage",
          "cid": "campaign111",
          "crid": "creative112",
          "adid": "314",
          "attr": [
            1,
            2,
            3,
            4
          ]
        }
      ]
    }
  ]
}
```


### 6.3.4 - 예제 4 – 인라인으로 반환된 네이티브 마크업 <a name="nativemarkupreturnedinline"></a>

다음은 네이티브 광고를 인라인으로 반환하는 입찰 응답 예제이다. `adm` 속성은 Dynamic Native Ads API에 맞춰 인코딩된 네이티브 광고 요청 문자열을 포함한다. 특히, 이 문자열은 요청 문자열과 동일한 버전을 사용한다. 또는 `adm` 속성을 생략하고, 입찰 승리 알림 `nurl`에 대한 응답으로 네이티브 광고 마크업을 반환할 수도 있다.

```javascript
{
  "id": "123",
  "seatbid": [
    {
      "bid": [
        {
          "id": "12345",
          "impid": "2",
          "price": 3.00,
          "nurl": "http://example.com/winnoticeurl",
          "adm": "{\"native\":{\"ver\":\"1.0\",\"link\":{ ... },\"imptrackers\":[ ... ],\"assets\":[ ... ]}}"
        }
      ]
    }
  ]
}
```


## [7. 구현 관련 참고 사항](implementation.md#implementationnotes)

- [7.1 - 입찰 없음 시그널링](implementation.md#nobidsignaling)

- [7.2 - 노출 만료](implementation.md#impressionexpiration)

- [7.3 - PMP 및 직접 거래](implementation.md#pmpanddirectdeals)

- [7.4 - 스킵 가능성](implementation.md#skippability)

- [7.5 - 규정 리소스](implementation.md#regsresources)

- [7.6 - 비디오 및 오디오 팟 입찰](implementation.md#podbidding)

- [7.7 - 네트워크 대 채널 예시 사례](implementation.md#networkandchannel)

- [7.8 - 청구 가능 이벤트 및 추적 광고 카운팅](implementation.md#counting)

- [7.9 - 디지털 아웃오브홈](implementation.md#dooh)

- [7.10 - 업데이트된 비디오 시그널](implementation.md#videosignals)

- [7.11 - 플로어 사용 가이드라인](implementation.md#floors)


# 부록 A. 추가 정보 <a name="appendixa"></a>

- Creative Commons / 저작자 표시 라이선스

 	creativecommons.org/licenses/by/3.0

- IAB (Interactive Advertising Bureau)

 	www.iab.com

- IAB 품질 보증 지침 (QAG):

 	www.iab.com/guidelines/iab-quality-assurance-guidelines-qag-taxonomy/

- JavaScript Object Notation (JSON)

 	www.json.org

- MMA (Mobile Marketing Association)

 	mmaglobal.com

- OpenRTB 프로젝트 (Github)

 	github.com/openrtb/OpenRTB/

- Apache Avro

 	avro.apache.org

 	Protocol Buffers (Protobuf)

code.google.com/p/protobuf

- Google Metro Codes

 	code.google.com/apis/adwords/docs/appendix/metrocodes.html

- UN 무역 및 운송 위치 코드:

 	www.unece.org/cefact/locode/service/location.htm


# 부록 B. 명세 변경 로그 <a name="appendixb"></a>

이 부록은 2.x 버전에서 발생한 명세 변경 사항을 정리한 목록이다. 여기에는 문서의 서식, 구조, 기술적 영향이 없는 내용은 포함되지 않으며, 명세의 실질적 변경만 다룬다.

**<strong>ORTB2.6-202303 이후 릴리스 노트는 GitHub [Releases](https://github.com/InteractiveAdvertisingBureau/openrtb2.x/releases) 페이지를 참고한다</strong>**

**버전 2.6-202210 (기본 2.6 버전)부터 2.6-202211:**
| 섹션 | 설명 |
| --- | --- |
| `3.1` | **객체 모델** DOOH 및 Qty 객체를 보여주기 위해 이미지 모델 업데이트 |
| `3.2.3` | **객체: Regs** 글로벌 개인정보 보호 문자열을 지원하기 위해 gpp 및 gpp_sid 필드 추가 |
| `3.2.13, 3.2.14` | **객체: Site, App** inventorypartnerdomain 추가 (이전에는 ext) |
| `3.2.31` | **객체: Qty** 디지털 아웃오브홈에서 승수 값의 출처를 설명하는 새로운 객체 |
| `3.2.32` | **객체: DOOH** 디지털 아웃오브홈 인벤토리의 프로그래매틱 구매를 지원하는 새로운 객체 |
| `7.9` | **구현 노트** DOOH 활용을 위한 노트, 예제 및 모범 사례 추가 |


**버전 2.5부터 2.6:**
	
	
| 섹션 | 설명 |
| --- | --- |
| `3.2.1, 3.2.16, 4.2.3, 3.2.18` | IETF BCP 47을 지원하기 위해 새 언어 필드 추가. IETF BCP 47은 동일한 구어의 다른 문자 버전(예: 번체 및 간체 중국어)을 구분하는 추가적인 세분화 계층 제공, https://en.wikipedia.org/wiki/IETF_language_tag |
| `3.2.3` | **객체: Regs** `gdpr` 속성 추가 (이전에는 ext) |
| `3.2.20` | **객체: User** `consent` 속성 추가 (이전에는 ext) |
| `5` | 섹션 제거 (열거형 목록) 모든 참조는 이제 AdCOM 1.0 / OpenRTB 3.0 목록을 가리킴 |
| `3.2.1, 3.2.13, 3.2.14, 3.2.15, 3.2.16, 3.2.17, 4.2.3` | **객체: BidRequest, Site, App, Publisher, Content, Producer, Bid** 모든 분류 참조에 cattax 사용 |
| `3.2.7, 3.2.8` | **객체: Video, Audio** rqddurs 추가 |
| `3.2.7, 3.2.8` | **객체: Video, Audio** pod bidding 지원을 위해 maxseq, poddur, podid, podseq, mincpmpersec, slotinpod 추가 |
| `4.4, 4.4.1` | **대체 매크로** AUCTION_MIN_TO_WIN 추가 |
| `4.2.3` | **객체, Bid** apis 추가 |
| `3.2.4` | **객체: Imp** rwdd 추가 |
| `3.2.1, 3.2.14, 4.2.3` | **객체: App, Bid, BidRequest** storeid 대 bundle 사용에 대한 언어 명확화 |
| `3.2.4` | **객체 Imp** ssai 추가 |
| `3.2.18` | **객체: Device** mccmnc 및 roaming에 대한 언어 명확화 |
| `3.2.23, 3.2.24` | **추가 객체:** Network, Channel, SupplyChain, SupplyChainNode, EIDs 및 UIDs* |
| `4.2.3` | **객체: Bid** mtype 추가 |
| `3.2.6, 3.2.7, 3.2.16` | **이전에 더 이상 사용되지 않는 속성 제거** 객체: Banner, wmax, hmax, wmin, hmin, 객체: Video, protocol, 객체: Content, videoquality |
| `7.6` | 비디오 및 오디오를 위한 pod bidding 구현 가이드 |
| `7.7` | Network 및 Channel 객체 예제 |
| `3.2.7, 3.2.8, 3.2.18, 3.2.20, 4.2.3` | **더 이상 사용되지 않는 속성** 객체: Video, sequence, 객체: Audio, sequence, 객체: Device, didsha1, didmd5, dpidsha1, dpidnd5, macsha1, macmd5, 객체: User, yob, gender, 객체: Bid, api |
| `7.8` | 청구 가능 이벤트 및 추적 광고 카운팅 추가 |
| `3.2.29, 3.2.30` | 객체: UserAgent 및 객체 Brand Version 추가 |
	
	
**버전 2.4부터 2.5:**
	
	
| 섹션 | 설명 |
| --- | --- |
| `2.4` | **섹션: 데이터 인코딩** 새 섹션 추가 |
| `3.1` | **객체 모델: Bid Request** Source 및 Metric 객체 포함하도록 업데이트 |
| `3.2.1` | **객체: BidRequest** bseat, wlang, source 속성 추가 |
| `3.2.2` | **객체: Source** Payment ID pchain 속성을 포함한 새 Source 객체 추가 |
| `3.2.4` | **객체: Imp** Metric 객체 추가 |
| `3.2.5` | **객체: Metric** 새 Metric 객체 추가 |
| `3.2.6` | **객체: Banner** vcm 속성 추가 |
| `3.2.7` | **객체: Video** placement 및 playbackend 속성 추가. playbackmethod 속성의 첫 번째 요소만 사용하도록 지침 추가 (향후 정수로 전환 준비) |
| `3.2.10` | **객체: Format** wratio, hratio, wmin 속성 추가 |
| `3.2.4` | **객체 Imp** ssai 추가 |
| `3.2.13` | **객체: Device** mccmnc 속성 추가. carrier 속성에서 "WIFI"를 캐리어로 사용하는 참조 제거하도록 명확화 |
| `4.2.3` | **객체: Bid** burl, lurl, tactic, language, wratio, hratio 속성 추가 |
| `4.4` | **대체 매크로:** ${AUCTION_MBR} 및 ${AUCTION_LOSS} 매크로 추가. 테스트 또는 품질 목적으로 렌더링할 때 알 수 없는 값에 대해 "AUDIT"를 사용하도록 모범 사례 추가 |
| `5.6` | **목록: API 프레임워크** 항목 6 추가 |
| `5.9` | **목록: 비디오 배치 유형** 새 목록 추가 |
| `5.10` | **목록: 재생 방법** 항목 5-6 추가 |
| `5.11` | **목록: 재생 중단 모드** 새 목록 추가 |
| `5.24` | **목록: No-Bid 이유 코드** 항목 9-10 추가 |
| `5.25` | **목록: 손실 이유 코드** 새 목록 추가 |


# 부록 C. 쿠키 기반 ID 동기화 <a name="appendixc"></a>

쿠키 동기화(또는 사용자 동기화, 사용자 매칭, 쿠키 매칭)는 한 쪽이 다른 쪽의 사용자 ID를 알게 되는 과정이다. 이 과정은 쿠키 기반 웹 환경에서 ID의 가용성을 위한 기초가 된다. 쿠키는 도메인에 종속적이므로, 한 쪽이 다른 쪽의 ID를 알기 위해서는 동기화 과정이 필요하다.

쿠키 동기화는 서로 사용자 ID를 전달해야 하는 두 당사자 간에 설정된다. 전통적으로는 DSP와 교환/SSP 간, 그리고 DSP와 DMP 간에 쿠키 동기화가 이루어진다.

쿠키 동기화 과정에서 한 쪽은 자신의 사용자 ID와 다른 쪽의 사용자 ID 간의 관계를 매치 테이블에 저장한다. 예를 들어, A사의 cookieID123과 B사의 cookieID789가 동일한 사용자임을 기록한다.

동기화 픽셀이 로드되면, 한 쪽은 자신의 쿠키를 읽거나 새로 설정하여 사용자 ID를 확인한 후, 다른 쪽이 제공한 URL로 302 리다이렉트를 실행해 해당 사용자 ID를 전달한다. 다른 쪽의 URL이 브라우저에서 로드되면, 그들은 자신의 쿠키를 읽거나 새로 설정하여 두 사용자 ID 간의 관계를 확립한다. 이 관계는 서버 측 데이터 저장소에 저장되거나, 가능한 경우 클라이언트 측 쿠키를 사용해 저장된다.

일반적으로 DSP와 교환/SSP 간에는 교환 측이 매치 테이블을 보관하지만, 반대의 경우도 가능하다. 교환 측이 매치 테이블을 보관할 경우, DSP에 보낼 입찰 요청을 생성할 때 이를 사용한다. 교환은 브라우저가 요청을 보낼 때 자신의 쿠키를 확인하고, 매치 테이블에서 사용자 ID를 조회해 DSP의 사용자 ID를 찾는다. 그런 다음 교환은 해당 DSP 사용자 ID를 입찰 요청의 "buyeruid" 필드에 포함시킨다.

쿠키 동기화 구현의 세부 사항은 통합 방식에 따라 다르며, 두 당사자 간에 논의해야 한다. 그러나 이 섹션에서는 일반적으로 쿠키 동기화가 어떻게 작동하는지 높은 수준에서 설명한다.

### 쿠키 동기화 예시 (교환 측 관리)
이 예시에서는 교환 측이 매치 테이블을 보관한다.

DSP는 교환에 자신의 동기화 URL을 제공한다. 예를 들면 다음과 같다:

https://ads.dsp.com/sync?exchange=29

교환은 DSP에 자신의 동기화 URL을 제공하며, 여기서 DSP의 사용자 ID를 어디에 넣을지 표시한다. 예를 들면 다음과 같다:

https://platform.exchange.com/match?dsp=12&dsp_user_id=<USER ID HERE>

DSP는 자신의 동기화 URL이 교환의 동기화 URL로 리다이렉트되도록 설정하고, DSP 사용자 ID를 적절한 위치에 넣는다.

교환은 DSP 동기화 픽셀을 사용자 브라우저에 로드한다. 이는 교환이 광고를 제공할 때나 다른 기회가 있을 때 이루어진다. DSP는 자신의 사용자 ID 쿠키를 확인한다. 이 예시에서 사용자 ID는 "6b9a9765-697e-4c44-b393-dbb00ae7ac6b"라고 가정한다. DSP 서버는 다음과 같이 302 리다이렉트를 실행한다:

https://platform.exchange.com/match?dsp=12&dsp_user_id=6b9a9765-697e-4c44-b393-dbb00ae7ac6b

이제 교환은 자신의 쿠키를 확인할 기회를 얻어, 교환의 쿠키 ID와 DSP의 쿠키 ID 간의 매핑을 확립한다. 이후 교환은 해당 교환 쿠키 ID가 있을 때 DSP의 ID를 "buyeruid"에 포함시켜 입찰 요청을 보낸다. DSP는 이를 통해 타겟팅, 빈도 제한, 측정 등을 수행한다.

DSP는 또한 자신의 기회가 있을 때 교환의 동기화 픽셀을 직접 로드할 수도 있다. 예를 들어, DSP의 타겟팅 및 전환 태그와 함께 로드할 수 있다.

### 쿠키 동기화 예시 (DSP 측 관리)
이 예시에서는 DSP가 매치 테이블을 보관한다.

교환은 DSP에 자신의 동기화 URL을 제공한다. 예를 들면 다음과 같다:

https://platform.exchange.com/match?dsp=12

DSP는 교환에 자신의 동기화 URL을 제공하며, 여기서 교환의 사용자 ID를 어디에 넣을지 표시한다:

https://ads.dsp.com/sync?exchange=29&exchange_id=<USER ID HERE>

교환은 자신의 동기화 URL이 DSP의 동기화 URL로 리다이렉트되도록 설정하고, 교환의 사용자 ID를 적절한 위치에 넣는다. DSP는 교환의 동기화 픽셀을 브라우저에 로드할 기회를 찾아 동기화를 시작한다. 교환은 또한 자신의 기회가 있을 때 DSP의 동기화 픽셀을 직접 로드할 수도 있다. 이 예시에서 교환의 사용자 ID는 "0cc175b9c0f1b6a831c399e269772661"이라고 가정한다. 교환의 동기화 픽셀이 로드되면, 교환은 자신의 쿠키를 확인한다. 그런 다음 다음과 같이 302 리다이렉트를 실행한다:

https://ads.dsp.com/sync?exchange=29&exchange_id=0cc175b9c0f1b6a831c399e269772661

이제 DSP의 동기화 픽셀이 브라우저에 로드되었으므로, DSP는 자신의 쿠키를 확인하고 자신의 사용자 ID와 교환의 사용자 ID 간의 매핑을 저장한다. 광고를 제공할 때까지 사용자 브라우저에 접근하지 않으므로, DSP는 이를 서버 측 데이터 저장소에 저장해야 한다.

교환이 입찰 요청을 보낼 때, 교환은 사용자 객체의 "id" 필드에 교환의 쿠키 ID를 포함시킨다. DSP는 교환의 쿠키 ID와 자신의 쿠키 ID 간의 매핑을 보관하고 있으므로, 이를 조회해 DSP의 사용자 ID를 확인할 수 있다. DSP는 이를 통해 타겟팅, 빈도 제한, 측정 등을 수행한다.

### 기타 고려 사항과 모범 사례
사용자 ID는 일부 개인정보 보호 규정에 따라 개인 데이터로 간주될 수 있으므로, 구현자는 법률 자문을 받고 적절한 조치를 적용해 규정을 준수해야 한다. 예를 들어, 다음과 같은 관행이 일반적이다:
GDPR, US Privacy String, GPP 등과 관련된 Tech Lab 사양에 따라 쿼리 문자열 매개변수를 포함시킨다.
GDPR 동의 문자열과 같은 정보를 기반으로, 동기화 픽셀을 실행할지 여부를 결정할 수 있다.
GDPR 동의 문자열과 같은 정보를 기반으로, 이벤트를 무시할 수도 있다. 예를 들어, 동기화 픽셀이 실행되었지만 사용자가 유럽에 있고 동의 정보가 제공되지 않은 경우, 사용자 동의를 알 수 없으므로 204 No Content를 즉시 반환하고 아무런 조치를 취하지 않을 수 있다.

구현자가 파티 간 매칭률과 커버리지를 극대화하기 위해 따를 수 있는 몇 가지 모범 사례가 있다:
쿠키는 일반적으로 수명이 제한적이므로, 매치 테이블 보존 기간을 14일에서 60일 정도로 제한하는 것이 일반적이다. 파티는 특정 사용자에 대한 매칭이 만료되기 전에 새로고침되도록 동기화 동작을 조정해야 한다.
동기화가 필요한 파티 목록이 긴 경우가 많다. 예를 들어, 교환은 각 사용자에 대해 협력하는 모든 DSP와 동기화를 트리거해야 한다. 따라서 광고를 제공할 때, 트래킹 태그를 제공할 때 등 모든 가능한 기회를 활용해 동기화 픽셀을 배포하는 것이 좋다.
두 파티가 가능한 경우 동기화 픽셀을 배포하는 것도 도움이 된다. 이렇게 하면 특정 사용자에 대한 동기화 기회가 증가한다.
동기화 픽셀은 사용자 브라우저에서 실행되므로, 웹 페이지 로드 시 오버헤드가 발생한다. 페이지 로드를 차단하지 않으려면, 숨겨진 IFRAME과 같은 논블로킹 방식으로 동기화 픽셀을 로드하는 것이 좋다. 또한, 특정 인스턴스에서 배포할 동기화 파트너 수를 적당한 수로 제한할 수도 있다.
예를 들어, 각 기회에 최대 5개의 파트너와 동기화하고 이를 기록한 후, 다음 기회에 다음 5개 파트너와 동기화하는 것이 합리적인 전략이다. 모든 파트너를 순환하고 특정 사용자에 대한 동기화가 확립되면, 잠시 동안 더 이상 동기화 픽셀을 실행할 필요가 없다. 각 동기화를 수행한 타임스탬프를 기록하면, ID가 매치 테이블에서 만료되기 직전에 또 다른 동기화를 트리거할 수 있다.


